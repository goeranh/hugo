<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>32 Transformering av data | Kurskompendium - introduktion till R</title>
  <meta name="description" content="32 Transformering av data | Kurskompendium - introduktion till R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="32 Transformering av data | Kurskompendium - introduktion till R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="32 Transformering av data | Kurskompendium - introduktion till R" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="workflow-basics-1.html"/>
<link rel="next" href="arbetsflöde-scripts-1.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduktion</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#basics"><i class="fa fa-check"></i><b>1.1</b> Basics</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#r-konsolen"><i class="fa fa-check"></i><b>1.2</b> R-konsolen</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#rstudio"><i class="fa fa-check"></i><b>1.3</b> RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#hjälpfunktioner"><i class="fa fa-check"></i><b>1.4</b> Hjälpfunktioner</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="utforska-data.html"><a href="utforska-data.html"><i class="fa fa-check"></i><b>2</b> Utforska data</a></li>
<li class="chapter" data-level="3" data-path="visualisering.html"><a href="visualisering.html"><i class="fa fa-check"></i><b>3</b> Visualisering</a>
<ul>
<li class="chapter" data-level="3.1" data-path="visualisering.html"><a href="visualisering.html#ett-första-diagram"><i class="fa fa-check"></i><b>3.1</b> Ett första diagram</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="visualisering.html"><a href="visualisering.html#ladda-data"><i class="fa fa-check"></i><b>3.1.1</b> Ladda data</a></li>
<li class="chapter" data-level="3.1.2" data-path="visualisering.html"><a href="visualisering.html#skapa-en-ggplot"><i class="fa fa-check"></i><b>3.1.2</b> Skapa en ggplot</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="visualisering.html"><a href="visualisering.html#en-grafikmall"><i class="fa fa-check"></i><b>3.2</b> En grafikmall</a></li>
<li class="chapter" data-level="3.3" data-path="visualisering.html"><a href="visualisering.html#övningar"><i class="fa fa-check"></i><b>3.3</b> Övningar</a></li>
<li class="chapter" data-level="3.4" data-path="visualisering.html"><a href="visualisering.html#aes-funktionen-och-mappings"><i class="fa fa-check"></i><b>3.4</b> <code>aes()</code>-funktionen och mappings</a></li>
<li class="chapter" data-level="3.5" data-path="visualisering.html"><a href="visualisering.html#övningar-1"><i class="fa fa-check"></i><b>3.5</b> Övningar</a></li>
<li class="chapter" data-level="3.6" data-path="visualisering.html"><a href="visualisering.html#vanliga-problem"><i class="fa fa-check"></i><b>3.6</b> Vanliga problem</a></li>
<li class="chapter" data-level="3.7" data-path="visualisering.html"><a href="visualisering.html#facets"><i class="fa fa-check"></i><b>3.7</b> Facets</a></li>
<li class="chapter" data-level="3.8" data-path="visualisering.html"><a href="visualisering.html#övningar-2"><i class="fa fa-check"></i><b>3.8</b> Övningar</a></li>
<li class="chapter" data-level="3.9" data-path="visualisering.html"><a href="visualisering.html#geometriska-objekt---geoms"><i class="fa fa-check"></i><b>3.9</b> “Geometriska” objekt - geoms</a></li>
<li class="chapter" data-level="3.10" data-path="visualisering.html"><a href="visualisering.html#övningar-3"><i class="fa fa-check"></i><b>3.10</b> Övningar</a></li>
<li class="chapter" data-level="3.11" data-path="visualisering.html"><a href="visualisering.html#statistiska-transformationer"><i class="fa fa-check"></i><b>3.11</b> Statistiska transformationer</a></li>
<li class="chapter" data-level="3.12" data-path="visualisering.html"><a href="visualisering.html#övningar-4"><i class="fa fa-check"></i><b>3.12</b> Övningar</a></li>
<li class="chapter" data-level="3.13" data-path="visualisering.html"><a href="visualisering.html#positionering"><i class="fa fa-check"></i><b>3.13</b> Positionering</a></li>
<li class="chapter" data-level="3.14" data-path="visualisering.html"><a href="visualisering.html#övningar-5"><i class="fa fa-check"></i><b>3.14</b> Övningar</a></li>
<li class="chapter" data-level="3.15" data-path="visualisering.html"><a href="visualisering.html#koordinatsystem"><i class="fa fa-check"></i><b>3.15</b> Koordinatsystem</a></li>
<li class="chapter" data-level="3.16" data-path="visualisering.html"><a href="visualisering.html#övningar-6"><i class="fa fa-check"></i><b>3.16</b> Övningar</a></li>
<li class="chapter" data-level="3.17" data-path="visualisering.html"><a href="visualisering.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>3.17</b> “The layered grammar of graphics”</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow-basics.html"><a href="workflow-basics.html"><i class="fa fa-check"></i><b>4</b> Workflow: Basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workflow-basics.html"><a href="workflow-basics.html#skriva-kod"><i class="fa fa-check"></i><b>4.1</b> Skriva kod</a></li>
<li class="chapter" data-level="4.2" data-path="workflow-basics.html"><a href="workflow-basics.html#anropa-funktioner"><i class="fa fa-check"></i><b>4.2</b> Anropa funktioner</a></li>
<li class="chapter" data-level="4.3" data-path="workflow-basics.html"><a href="workflow-basics.html#övningar-7"><i class="fa fa-check"></i><b>4.3</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transformering-av-data.html"><a href="transformering-av-data.html"><i class="fa fa-check"></i><b>5</b> Transformering av data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="transformering-av-data.html"><a href="transformering-av-data.html#introduktion-1"><i class="fa fa-check"></i><b>5.1</b> Introduktion</a></li>
<li class="chapter" data-level="5.2" data-path="transformering-av-data.html"><a href="transformering-av-data.html#förberedelser"><i class="fa fa-check"></i><b>5.2</b> Förberedelser</a></li>
<li class="chapter" data-level="5.3" data-path="transformering-av-data.html"><a href="transformering-av-data.html#dplyr-grunder"><i class="fa fa-check"></i><b>5.3</b> <code>dplyr</code> grunder</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="transformering-av-data.html"><a href="transformering-av-data.html#filtrera-raderposter-med-filter"><i class="fa fa-check"></i><b>5.3.1</b> Filtrera rader/poster med <code>filter()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="transformering-av-data.html"><a href="transformering-av-data.html#övningar-8"><i class="fa fa-check"></i><b>5.4</b> Övningar</a></li>
<li class="chapter" data-level="5.5" data-path="transformering-av-data.html"><a href="transformering-av-data.html#arrangera-poster-med-arrange"><i class="fa fa-check"></i><b>5.5</b> Arrangera poster med <code>arrange()</code></a></li>
<li class="chapter" data-level="5.6" data-path="transformering-av-data.html"><a href="transformering-av-data.html#övningar-9"><i class="fa fa-check"></i><b>5.6</b> Övningar</a></li>
<li class="chapter" data-level="5.7" data-path="transformering-av-data.html"><a href="transformering-av-data.html#välj-kolumner-med-select"><i class="fa fa-check"></i><b>5.7</b> Välj kolumner med <code>select()</code></a></li>
<li class="chapter" data-level="5.8" data-path="transformering-av-data.html"><a href="transformering-av-data.html#övningar-10"><i class="fa fa-check"></i><b>5.8</b> Övningar</a></li>
<li class="chapter" data-level="5.9" data-path="transformering-av-data.html"><a href="transformering-av-data.html#lägg-till-flera-variabler-med-hjälp-av-mutate"><i class="fa fa-check"></i><b>5.9</b> Lägg till flera variabler med hjälp av <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="transformering-av-data.html"><a href="transformering-av-data.html#funktioner-och-operatorer-att-användas-med-mutate"><i class="fa fa-check"></i><b>5.9.1</b> Funktioner och operatorer att användas med <code>mutate()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="transformering-av-data.html"><a href="transformering-av-data.html#övningar-11"><i class="fa fa-check"></i><b>5.10</b> Övningar</a></li>
<li class="chapter" data-level="5.11" data-path="transformering-av-data.html"><a href="transformering-av-data.html#grupperade-summeringar-med-summarise"><i class="fa fa-check"></i><b>5.11</b> Grupperade summeringar med <code>summarise()</code></a></li>
<li class="chapter" data-level="5.12" data-path="transformering-av-data.html"><a href="transformering-av-data.html#kombinera-multipla-operationer-med-the-pipe"><i class="fa fa-check"></i><b>5.12</b> Kombinera multipla operationer med the pipe</a></li>
<li class="chapter" data-level="5.13" data-path="transformering-av-data.html"><a href="transformering-av-data.html#missing-values"><i class="fa fa-check"></i><b>5.13</b> Missing values</a></li>
<li class="chapter" data-level="5.14" data-path="transformering-av-data.html"><a href="transformering-av-data.html#antal-counts"><i class="fa fa-check"></i><b>5.14</b> Antal (counts)</a></li>
<li class="chapter" data-level="5.15" data-path="transformering-av-data.html"><a href="transformering-av-data.html#användbara-summeringsfunktioner"><i class="fa fa-check"></i><b>5.15</b> Användbara summeringsfunktioner</a></li>
<li class="chapter" data-level="5.16" data-path="transformering-av-data.html"><a href="transformering-av-data.html#gruppera-med-flera-variabler"><i class="fa fa-check"></i><b>5.16</b> Gruppera med flera variabler</a></li>
<li class="chapter" data-level="5.17" data-path="transformering-av-data.html"><a href="transformering-av-data.html#av-gruppera"><i class="fa fa-check"></i><b>5.17</b> Av-gruppera</a></li>
<li class="chapter" data-level="5.18" data-path="transformering-av-data.html"><a href="transformering-av-data.html#övningar-12"><i class="fa fa-check"></i><b>5.18</b> Övningar</a></li>
<li class="chapter" data-level="5.19" data-path="transformering-av-data.html"><a href="transformering-av-data.html#grupperade-beräkningar-och-filtreringar"><i class="fa fa-check"></i><b>5.19</b> Grupperade beräkningar och filtreringar</a></li>
<li class="chapter" data-level="5.20" data-path="transformering-av-data.html"><a href="transformering-av-data.html#övningar-13"><i class="fa fa-check"></i><b>5.20</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="arbetsflöde-scripts.html"><a href="arbetsflöde-scripts.html"><i class="fa fa-check"></i><b>6</b> Arbetsflöde: scripts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="arbetsflöde-scripts.html"><a href="arbetsflöde-scripts.html#att-köra-kod"><i class="fa fa-check"></i><b>6.1</b> Att köra kod</a></li>
<li class="chapter" data-level="6.2" data-path="arbetsflöde-scripts.html"><a href="arbetsflöde-scripts.html#diagnostics"><i class="fa fa-check"></i><b>6.2</b> Diagnostics</a></li>
<li class="chapter" data-level="6.3" data-path="arbetsflöde-scripts.html"><a href="arbetsflöde-scripts.html#praktik"><i class="fa fa-check"></i><b>6.3</b> Praktik</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html"><i class="fa fa-check"></i><b>7</b> Explorativ analys av data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#introduktion-2"><i class="fa fa-check"></i><b>7.1</b> Introduktion</a></li>
<li class="chapter" data-level="7.2" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#frågor"><i class="fa fa-check"></i><b>7.2</b> Frågor</a></li>
<li class="chapter" data-level="7.3" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#variation"><i class="fa fa-check"></i><b>7.3</b> Variation</a></li>
<li class="chapter" data-level="7.4" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#visualisera-fördelningar"><i class="fa fa-check"></i><b>7.4</b> Visualisera fördelningar</a></li>
<li class="chapter" data-level="7.5" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#outliers"><i class="fa fa-check"></i><b>7.5</b> Outliers</a></li>
<li class="chapter" data-level="7.6" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#övningar-14"><i class="fa fa-check"></i><b>7.6</b> Övningar</a></li>
<li class="chapter" data-level="7.7" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#missing-values-1"><i class="fa fa-check"></i><b>7.7</b> Missing values</a></li>
<li class="chapter" data-level="7.8" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#samvarians---covariance"><i class="fa fa-check"></i><b>7.8</b> Samvarians - covariance</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#en-kategorisk-och-en-kontinuerlig-variabel"><i class="fa fa-check"></i><b>7.8.1</b> En kategorisk och en kontinuerlig variabel</a></li>
<li class="chapter" data-level="7.8.2" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#övningar-15"><i class="fa fa-check"></i><b>7.8.2</b> Övningar</a></li>
<li class="chapter" data-level="7.8.3" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#två-kategoriska-variabler"><i class="fa fa-check"></i><b>7.8.3</b> Två kategoriska variabler</a></li>
<li class="chapter" data-level="7.8.4" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#två-kontinuerliga-variabler"><i class="fa fa-check"></i><b>7.8.4</b> Två kontinuerliga variabler</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#ggplot2-calls"><i class="fa fa-check"></i><b>7.9</b> <code>ggplot2</code> calls</a></li>
<li class="chapter" data-level="7.10" data-path="explorativ-analys-av-data.html"><a href="explorativ-analys-av-data.html#att-lära-mer"><i class="fa fa-check"></i><b>7.10</b> Att lära mer</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="arbetsflöde-projekt.html"><a href="arbetsflöde-projekt.html"><i class="fa fa-check"></i><b>8</b> Arbetsflöde: Projekt</a>
<ul>
<li class="chapter" data-level="8.1" data-path="arbetsflöde-projekt.html"><a href="arbetsflöde-projekt.html#vad-är-viktigt"><i class="fa fa-check"></i><b>8.1</b> Vad är viktigt?</a></li>
<li class="chapter" data-level="8.2" data-path="arbetsflöde-projekt.html"><a href="arbetsflöde-projekt.html#vart-lever-analysen-arbetsbiblioteket"><i class="fa fa-check"></i><b>8.2</b> Vart lever analysen? Arbetsbiblioteket</a></li>
<li class="chapter" data-level="8.3" data-path="arbetsflöde-projekt.html"><a href="arbetsflöde-projekt.html#sökvägar-och-bibliotekmappar"><i class="fa fa-check"></i><b>8.3</b> Sökvägar och bibliotek/mappar</a></li>
<li class="chapter" data-level="8.4" data-path="arbetsflöde-projekt.html"><a href="arbetsflöde-projekt.html#rstudio-projects-viktigt"><i class="fa fa-check"></i><b>8.4</b> RStudio projects VIKTIGT!</a></li>
<li class="chapter" data-level="8.5" data-path="arbetsflöde-projekt.html"><a href="arbetsflöde-projekt.html#sammanfattningsvis"><i class="fa fa-check"></i><b>8.5</b> Sammanfattningsvis</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="wrangle-att-brottas-med-data.html"><a href="wrangle-att-brottas-med-data.html"><i class="fa fa-check"></i><b>9</b> Wrangle - att brottas med data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="wrangle-att-brottas-med-data.html"><a href="wrangle-att-brottas-med-data.html#introduktion-3"><i class="fa fa-check"></i><b>9.1</b> Introduktion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>10</b> Tibbles</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tibbles.html"><a href="tibbles.html#skapa-tibbles"><i class="fa fa-check"></i><b>10.1</b> Skapa tibbles</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="tibbles.html"><a href="tibbles.html#tibbles-vs-data-frames"><i class="fa fa-check"></i><b>10.1.1</b> Tibbles vs data frames</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="tibbles.html"><a href="tibbles.html#utskrift-printing"><i class="fa fa-check"></i><b>10.2</b> Utskrift (Printing)</a></li>
<li class="chapter" data-level="10.3" data-path="tibbles.html"><a href="tibbles.html#urval"><i class="fa fa-check"></i><b>10.3</b> Urval</a></li>
<li class="chapter" data-level="10.4" data-path="tibbles.html"><a href="tibbles.html#använda-äldre-kod"><i class="fa fa-check"></i><b>10.4</b> Använda äldre kod</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="importera-data.html"><a href="importera-data.html"><i class="fa fa-check"></i><b>11</b> Importera data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="importera-data.html"><a href="importera-data.html#jämförelse-med-base-r"><i class="fa fa-check"></i><b>11.1</b> Jämförelse med base R</a></li>
<li class="chapter" data-level="11.2" data-path="importera-data.html"><a href="importera-data.html#övningar-16"><i class="fa fa-check"></i><b>11.2</b> Övningar</a></li>
<li class="chapter" data-level="11.3" data-path="importera-data.html"><a href="importera-data.html#omvandla-vektorer"><i class="fa fa-check"></i><b>11.3</b> Omvandla vektorer</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="importera-data.html"><a href="importera-data.html#numeriska-variabler"><i class="fa fa-check"></i><b>11.3.1</b> Numeriska variabler</a></li>
<li class="chapter" data-level="11.3.2" data-path="importera-data.html"><a href="importera-data.html#textsträngar"><i class="fa fa-check"></i><b>11.3.2</b> Textsträngar</a></li>
<li class="chapter" data-level="11.3.3" data-path="importera-data.html"><a href="importera-data.html#kategoriska-data"><i class="fa fa-check"></i><b>11.3.3</b> Kategoriska data</a></li>
<li class="chapter" data-level="11.3.4" data-path="importera-data.html"><a href="importera-data.html#datum-och-tid"><i class="fa fa-check"></i><b>11.3.4</b> Datum och tid</a></li>
<li class="chapter" data-level="11.3.5" data-path="importera-data.html"><a href="importera-data.html#övningar-17"><i class="fa fa-check"></i><b>11.3.5</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="importera-data.html"><a href="importera-data.html#hur-readr-plockar-isär-parse-en-fil"><i class="fa fa-check"></i><b>11.4</b> Hur <code>readr</code> “plockar isär” (parse) en fil</a></li>
<li class="chapter" data-level="11.5" data-path="importera-data.html"><a href="importera-data.html#problem"><i class="fa fa-check"></i><b>11.5</b> Problem</a></li>
<li class="chapter" data-level="11.6" data-path="importera-data.html"><a href="importera-data.html#skriva-till-en-fil"><i class="fa fa-check"></i><b>11.6</b> Skriva till en fil</a></li>
<li class="chapter" data-level="11.7" data-path="importera-data.html"><a href="importera-data.html#andra-datatyper"><i class="fa fa-check"></i><b>11.7</b> Andra datatyper</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="excel-och-r.html"><a href="excel-och-r.html"><i class="fa fa-check"></i><b>12</b> Excel och R</a>
<ul>
<li class="chapter" data-level="12.1" data-path="excel-och-r.html"><a href="excel-och-r.html#skriv-till-en-excelfil"><i class="fa fa-check"></i><b>12.1</b> Skriv till en excelfil</a></li>
<li class="chapter" data-level="12.2" data-path="excel-och-r.html"><a href="excel-och-r.html#läsa-in-excel"><i class="fa fa-check"></i><b>12.2</b> Läsa in excel</a></li>
<li class="chapter" data-level="12.3" data-path="excel-och-r.html"><a href="excel-och-r.html#ytterligare-resurser-för-att-hantera-excel-filer-i-r"><i class="fa fa-check"></i><b>12.3</b> Ytterligare resurser för att hantera excel-filer i R</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html"><i class="fa fa-check"></i><b>13</b> Städa data (tidy data)</a>
<ul>
<li class="chapter" data-level="13.1" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#introduktion-4"><i class="fa fa-check"></i><b>13.1</b> Introduktion</a></li>
<li class="chapter" data-level="13.2" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#spreading-and-gathering"><i class="fa fa-check"></i><b>13.2</b> Spreading and gathering</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#gathering"><i class="fa fa-check"></i><b>13.2.1</b> Gathering</a></li>
<li class="chapter" data-level="13.2.2" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#spreading"><i class="fa fa-check"></i><b>13.2.2</b> Spreading</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#övningar-18"><i class="fa fa-check"></i><b>13.3</b> Övningar</a></li>
<li class="chapter" data-level="13.4" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#separera-och-förena"><i class="fa fa-check"></i><b>13.4</b> Separera och förena</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#separate"><i class="fa fa-check"></i><b>13.4.1</b> Separate</a></li>
<li class="chapter" data-level="13.4.2" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#unite"><i class="fa fa-check"></i><b>13.4.2</b> Unite</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#övningar-19"><i class="fa fa-check"></i><b>13.5</b> Övningar</a></li>
<li class="chapter" data-level="13.6" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#missing-values-2"><i class="fa fa-check"></i><b>13.6</b> Missing values</a></li>
<li class="chapter" data-level="13.7" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#övningar-20"><i class="fa fa-check"></i><b>13.7</b> Övningar</a></li>
<li class="chapter" data-level="13.8" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#en-case-study"><i class="fa fa-check"></i><b>13.8</b> En case study</a></li>
<li class="chapter" data-level="13.9" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#övningar-21"><i class="fa fa-check"></i><b>13.9</b> Övningar</a></li>
<li class="chapter" data-level="13.10" data-path="städa-data-tidy-data.html"><a href="städa-data-tidy-data.html#non-tidy-data"><i class="fa fa-check"></i><b>13.10</b> Non-tidy data</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html"><i class="fa fa-check"></i><b>14</b> Relationer mellan datamängder</a>
<ul>
<li class="chapter" data-level="14.1" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#introduktion-5"><i class="fa fa-check"></i><b>14.1</b> Introduktion</a></li>
<li class="chapter" data-level="14.2" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#nycflights13"><i class="fa fa-check"></i><b>14.2</b> <code>nycflights13</code></a></li>
<li class="chapter" data-level="14.3" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#keys"><i class="fa fa-check"></i><b>14.3</b> Keys</a></li>
<li class="chapter" data-level="14.4" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#mutating-joins"><i class="fa fa-check"></i><b>14.4</b> <em>Mutating joins</em></a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#att-förstå-joins"><i class="fa fa-check"></i><b>14.4.1</b> Att förstå <em>joins</em></a></li>
<li class="chapter" data-level="14.4.2" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#inner-join"><i class="fa fa-check"></i><b>14.4.2</b> Inner join</a></li>
<li class="chapter" data-level="14.4.3" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#outer-joins"><i class="fa fa-check"></i><b>14.4.3</b> Outer joins</a></li>
<li class="chapter" data-level="14.4.4" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#duplicate-keys"><i class="fa fa-check"></i><b>14.4.4</b> Duplicate keys</a></li>
<li class="chapter" data-level="14.4.5" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#definiera-nyckel-kolumner-key-columns"><i class="fa fa-check"></i><b>14.4.5</b> Definiera nyckel-kolumner (<em>key columns</em>)</a></li>
<li class="chapter" data-level="14.4.6" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#övningar-22"><i class="fa fa-check"></i><b>14.4.6</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#filtering-joins"><i class="fa fa-check"></i><b>14.5</b> <em>Filtering joins</em></a></li>
<li class="chapter" data-level="14.6" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#problem-med-joins"><i class="fa fa-check"></i><b>14.6</b> Problem med <em>joins</em></a></li>
<li class="chapter" data-level="14.7" data-path="relationer-mellan-datamängder.html"><a href="relationer-mellan-datamängder.html#set-operations"><i class="fa fa-check"></i><b>14.7</b> Set operations</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html"><i class="fa fa-check"></i><b>15</b> Textsträngar (strings)</a>
<ul>
<li class="chapter" data-level="15.1" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#introduktion-6"><i class="fa fa-check"></i><b>15.1</b> Introduktion</a></li>
<li class="chapter" data-level="15.2" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#basics-1"><i class="fa fa-check"></i><b>15.2</b> Basics</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#stringr-funktioner"><i class="fa fa-check"></i><b>15.2.1</b> <code>stringr</code>-funktioner</a></li>
<li class="chapter" data-level="15.2.2" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#kombinera-strängar"><i class="fa fa-check"></i><b>15.2.2</b> Kombinera strängar</a></li>
<li class="chapter" data-level="15.2.3" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#extrahera-delar-av-textsträngar-subsetting"><i class="fa fa-check"></i><b>15.2.3</b> Extrahera delar av textsträngar (subsetting)</a></li>
<li class="chapter" data-level="15.2.4" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#övningar-23"><i class="fa fa-check"></i><b>15.2.4</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#matcha-textmönster-med-hjälp-av-regular-expressions"><i class="fa fa-check"></i><b>15.3</b> Matcha textmönster med hjälp av <em>regular expressions</em></a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#basic-matches"><i class="fa fa-check"></i><b>15.3.1</b> Basic matches</a></li>
<li class="chapter" data-level="15.3.2" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#ankare-anchors"><i class="fa fa-check"></i><b>15.3.2</b> Ankare (Anchors)</a></li>
<li class="chapter" data-level="15.3.3" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#tecken-klasser"><i class="fa fa-check"></i><b>15.3.3</b> Tecken-klasser</a></li>
<li class="chapter" data-level="15.3.4" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#repeterande-tecken"><i class="fa fa-check"></i><b>15.3.4</b> Repeterande tecken</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#verktyg"><i class="fa fa-check"></i><b>15.4</b> Verktyg</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#upptäck-matchningar"><i class="fa fa-check"></i><b>15.4.1</b> Upptäck matchningar</a></li>
<li class="chapter" data-level="15.4.2" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#övningar-26"><i class="fa fa-check"></i><b>15.4.2</b> Övningar</a></li>
<li class="chapter" data-level="15.4.3" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#extrahera-matchningar"><i class="fa fa-check"></i><b>15.4.3</b> Extrahera matchningar</a></li>
<li class="chapter" data-level="15.4.4" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#gruppereade-matchningar"><i class="fa fa-check"></i><b>15.4.4</b> Gruppereade matchningar</a></li>
<li class="chapter" data-level="15.4.5" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#ersätt-matchningar"><i class="fa fa-check"></i><b>15.4.5</b> Ersätt matchningar</a></li>
<li class="chapter" data-level="15.4.6" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#dela-upp-textsträngar"><i class="fa fa-check"></i><b>15.4.6</b> Dela upp textsträngar</a></li>
<li class="chapter" data-level="15.4.7" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#hitta-matchningar"><i class="fa fa-check"></i><b>15.4.7</b> Hitta matchningar</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#andra-typer-av-mönster"><i class="fa fa-check"></i><b>15.5</b> Andra typer av mönster</a></li>
<li class="chapter" data-level="15.6" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#andra-typer-av-regexps"><i class="fa fa-check"></i><b>15.6</b> Andra typer av regexps</a></li>
<li class="chapter" data-level="15.7" data-path="textsträngar-strings.html"><a href="textsträngar-strings.html#stringi"><i class="fa fa-check"></i><b>15.7</b> stringi</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="kategoriska-variabler-factors.html"><a href="kategoriska-variabler-factors.html"><i class="fa fa-check"></i><b>16</b> Kategoriska variabler (Factors)</a>
<ul>
<li class="chapter" data-level="16.1" data-path="kategoriska-variabler-factors.html"><a href="kategoriska-variabler-factors.html#introduktion-7"><i class="fa fa-check"></i><b>16.1</b> Introduktion</a></li>
<li class="chapter" data-level="16.2" data-path="kategoriska-variabler-factors.html"><a href="kategoriska-variabler-factors.html#skapa-factors"><i class="fa fa-check"></i><b>16.2</b> Skapa factors</a></li>
<li class="chapter" data-level="16.3" data-path="kategoriska-variabler-factors.html"><a href="kategoriska-variabler-factors.html#general-social-survey"><i class="fa fa-check"></i><b>16.3</b> General Social Survey</a></li>
<li class="chapter" data-level="16.4" data-path="kategoriska-variabler-factors.html"><a href="kategoriska-variabler-factors.html#modifiera-ordningen-av-factors"><i class="fa fa-check"></i><b>16.4</b> Modifiera ordningen av factors</a></li>
<li class="chapter" data-level="16.5" data-path="kategoriska-variabler-factors.html"><a href="kategoriska-variabler-factors.html#modifiera-factor-levels"><i class="fa fa-check"></i><b>16.5</b> Modifiera factor levels</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html"><i class="fa fa-check"></i><b>17</b> Datum och tidsformat</a>
<ul>
<li class="chapter" data-level="17.1" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#introduktion-8"><i class="fa fa-check"></i><b>17.1</b> Introduktion</a></li>
<li class="chapter" data-level="17.2" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#skapa-datum-och-tid"><i class="fa fa-check"></i><b>17.2</b> Skapa datum och tid</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#från-textsträngar"><i class="fa fa-check"></i><b>17.2.1</b> Från textsträngar</a></li>
<li class="chapter" data-level="17.2.2" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#från-enskilda-kompnenter"><i class="fa fa-check"></i><b>17.2.2</b> Från enskilda kompnenter</a></li>
<li class="chapter" data-level="17.2.3" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#från-andra-datumtid-format"><i class="fa fa-check"></i><b>17.2.3</b> Från andra datum/tid-format</a></li>
<li class="chapter" data-level="17.2.4" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#övningar-27"><i class="fa fa-check"></i><b>17.2.4</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#datumtid-komponenter"><i class="fa fa-check"></i><b>17.3</b> Datum/tid-komponenter</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#extrahera-komponenter"><i class="fa fa-check"></i><b>17.3.1</b> Extrahera komponenter</a></li>
<li class="chapter" data-level="17.3.2" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#avrundning"><i class="fa fa-check"></i><b>17.3.2</b> Avrundning</a></li>
<li class="chapter" data-level="17.3.3" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#ange-komponenter"><i class="fa fa-check"></i><b>17.3.3</b> Ange komponenter</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#tidsintervall"><i class="fa fa-check"></i><b>17.4</b> Tidsintervall</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#varaktighet"><i class="fa fa-check"></i><b>17.4.1</b> Varaktighet</a></li>
<li class="chapter" data-level="17.4.2" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#perioder"><i class="fa fa-check"></i><b>17.4.2</b> Perioder</a></li>
<li class="chapter" data-level="17.4.3" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#intervall"><i class="fa fa-check"></i><b>17.4.3</b> Intervall</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="datum-och-tidsformat.html"><a href="datum-och-tidsformat.html#summering"><i class="fa fa-check"></i><b>17.5</b> Summering</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="programmering-i-r.html"><a href="programmering-i-r.html"><i class="fa fa-check"></i><b>18</b> Programmering i R</a>
<ul>
<li class="chapter" data-level="18.1" data-path="programmering-i-r.html"><a href="programmering-i-r.html#introduktion-9"><i class="fa fa-check"></i><b>18.1</b> Introduktion</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>19</b> Pipes</a></li>
<li class="chapter" data-level="20" data-path="funktioner.html"><a href="funktioner.html"><i class="fa fa-check"></i><b>20</b> Funktioner</a>
<ul>
<li class="chapter" data-level="20.1" data-path="funktioner.html"><a href="funktioner.html#när-bör-du-skapa-en-funktion"><i class="fa fa-check"></i><b>20.1</b> När bör du skapa en funktion?</a></li>
<li class="chapter" data-level="20.2" data-path="funktioner.html"><a href="funktioner.html#funktioner-är-till-för-människor-och-datorer"><i class="fa fa-check"></i><b>20.2</b> Funktioner är till för människor och datorer</a></li>
<li class="chapter" data-level="20.3" data-path="funktioner.html"><a href="funktioner.html#villkorlig-exekvering"><i class="fa fa-check"></i><b>20.3</b> Villkorlig exekvering</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="funktioner.html"><a href="funktioner.html#villkor"><i class="fa fa-check"></i><b>20.3.1</b> Villkor</a></li>
<li class="chapter" data-level="20.3.2" data-path="funktioner.html"><a href="funktioner.html#multipla-villkor"><i class="fa fa-check"></i><b>20.3.2</b> Multipla villkor</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="funktioner.html"><a href="funktioner.html#funktionsargument"><i class="fa fa-check"></i><b>20.4</b> Funktionsargument</a></li>
<li class="chapter" data-level="20.5" data-path="funktioner.html"><a href="funktioner.html#kolla-värden"><i class="fa fa-check"></i><b>20.5</b> Kolla värden</a></li>
<li class="chapter" data-level="20.6" data-path="funktioner.html"><a href="funktioner.html#punkt-punkt-punkt"><i class="fa fa-check"></i><b>20.6</b> punkt-punkt-punkt</a></li>
<li class="chapter" data-level="20.7" data-path="funktioner.html"><a href="funktioner.html#returnera-värden"><i class="fa fa-check"></i><b>20.7</b> Returnera värden</a>
<ul>
<li class="chapter" data-level="20.7.1" data-path="funktioner.html"><a href="funktioner.html#explicita-return-uttryck"><i class="fa fa-check"></i><b>20.7.1</b> Explicita <code>return</code>-uttryck</a></li>
</ul></li>
<li class="chapter" data-level="20.8" data-path="funktioner.html"><a href="funktioner.html#skriva-funktioner-med-hjälp-av-pipes"><i class="fa fa-check"></i><b>20.8</b> Skriva funktioner med hjälp av pipes</a></li>
<li class="chapter" data-level="20.9" data-path="funktioner.html"><a href="funktioner.html#environment-svårt-hitta-ett-svenskt-uttryck"><i class="fa fa-check"></i><b>20.9</b> Environment (svårt hitta ett svenskt uttryck)</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="vektorer.html"><a href="vektorer.html"><i class="fa fa-check"></i><b>21</b> Vektorer</a>
<ul>
<li class="chapter" data-level="21.1" data-path="vektorer.html"><a href="vektorer.html#introduktion-10"><i class="fa fa-check"></i><b>21.1</b> Introduktion</a></li>
<li class="chapter" data-level="21.2" data-path="vektorer.html"><a href="vektorer.html#atomic-vectors"><i class="fa fa-check"></i><b>21.2</b> Atomic vectors</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="vektorer.html"><a href="vektorer.html#logical-vectors"><i class="fa fa-check"></i><b>21.2.1</b> Logical vectors</a></li>
<li class="chapter" data-level="21.2.2" data-path="vektorer.html"><a href="vektorer.html#numeriska-vektorer"><i class="fa fa-check"></i><b>21.2.2</b> Numeriska vektorer</a></li>
<li class="chapter" data-level="21.2.3" data-path="vektorer.html"><a href="vektorer.html#character"><i class="fa fa-check"></i><b>21.2.3</b> Character</a></li>
<li class="chapter" data-level="21.2.4" data-path="vektorer.html"><a href="vektorer.html#använda-atomic-vectors"><i class="fa fa-check"></i><b>21.2.4</b> Använda atomic vectors</a></li>
<li class="chapter" data-level="21.2.5" data-path="vektorer.html"><a href="vektorer.html#scalars-och-recycling"><i class="fa fa-check"></i><b>21.2.5</b> Scalars och recycling</a></li>
<li class="chapter" data-level="21.2.6" data-path="vektorer.html"><a href="vektorer.html#rekursiva-vektorer-lists"><i class="fa fa-check"></i><b>21.2.6</b> Rekursiva vektorer (lists)</a></li>
<li class="chapter" data-level="21.2.7" data-path="vektorer.html"><a href="vektorer.html#attribut"><i class="fa fa-check"></i><b>21.2.7</b> Attribut</a></li>
<li class="chapter" data-level="21.2.8" data-path="vektorer.html"><a href="vektorer.html#förstärkta-vektorer-augmented-vectors"><i class="fa fa-check"></i><b>21.2.8</b> Förstärkta vektorer (Augmented vectors)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="itereringar.html"><a href="itereringar.html"><i class="fa fa-check"></i><b>22</b> Itereringar</a>
<ul>
<li class="chapter" data-level="22.1" data-path="itereringar.html"><a href="itereringar.html#for-loops"><i class="fa fa-check"></i><b>22.1</b> For-loops</a></li>
<li class="chapter" data-level="22.2" data-path="itereringar.html"><a href="itereringar.html#variationer-av-for-loopar"><i class="fa fa-check"></i><b>22.2</b> Variationer av for-loopar</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="itereringar.html"><a href="itereringar.html#modifiera-ett-existerande-obkjekt"><i class="fa fa-check"></i><b>22.2.1</b> Modifiera ett existerande obkjekt</a></li>
<li class="chapter" data-level="22.2.2" data-path="itereringar.html"><a href="itereringar.html#när-längden-på-output-inte-är-känd"><i class="fa fa-check"></i><b>22.2.2</b> När längden på output inte är känd</a></li>
<li class="chapter" data-level="22.2.3" data-path="itereringar.html"><a href="itereringar.html#när-sekvensens-längd-är-okänd"><i class="fa fa-check"></i><b>22.2.3</b> När sekvensens längd är okänd</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="itereringar.html"><a href="itereringar.html#for-loops-vs.-funktioner"><i class="fa fa-check"></i><b>22.3</b> for-loops vs. Funktioner</a></li>
<li class="chapter" data-level="22.4" data-path="itereringar.html"><a href="itereringar.html#mappningsfunktioner"><i class="fa fa-check"></i><b>22.4</b> Mappningsfunktioner</a>
<ul>
<li class="chapter" data-level="22.4.1" data-path="itereringar.html"><a href="itereringar.html#genvägar"><i class="fa fa-check"></i><b>22.4.1</b> Genvägar</a></li>
</ul></li>
<li class="chapter" data-level="22.5" data-path="itereringar.html"><a href="itereringar.html#hantera-errors"><i class="fa fa-check"></i><b>22.5</b> Hantera errors</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>23</b> Introduction</a></li>
<li class="chapter" data-level="24" data-path="modellering-basics.html"><a href="modellering-basics.html"><i class="fa fa-check"></i><b>24</b> Modellering: basics</a>
<ul>
<li class="chapter" data-level="24.1" data-path="modellering-basics.html"><a href="modellering-basics.html#en-enkel-modell"><i class="fa fa-check"></i><b>24.1</b> En enkel modell</a></li>
<li class="chapter" data-level="24.2" data-path="modellering-basics.html"><a href="modellering-basics.html#visualisera-modeller"><i class="fa fa-check"></i><b>24.2</b> Visualisera modeller</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="modellering-basics.html"><a href="modellering-basics.html#prediktioner"><i class="fa fa-check"></i><b>24.2.1</b> Prediktioner</a></li>
<li class="chapter" data-level="24.2.2" data-path="modellering-basics.html"><a href="modellering-basics.html#residualer"><i class="fa fa-check"></i><b>24.2.2</b> Residualer</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="modellering-basics.html"><a href="modellering-basics.html#formler-och-modell-familjer"><i class="fa fa-check"></i><b>24.3</b> Formler och modell-familjer</a>
<ul>
<li class="chapter" data-level="24.3.1" data-path="modellering-basics.html"><a href="modellering-basics.html#kategoriska-variabler"><i class="fa fa-check"></i><b>24.3.1</b> Kategoriska variabler</a></li>
<li class="chapter" data-level="24.3.2" data-path="modellering-basics.html"><a href="modellering-basics.html#interaktioner"><i class="fa fa-check"></i><b>24.3.2</b> Interaktioner</a></li>
<li class="chapter" data-level="24.3.3" data-path="modellering-basics.html"><a href="modellering-basics.html#interaktioner-två-kontinuerliga-variabler"><i class="fa fa-check"></i><b>24.3.3</b> Interaktioner (två kontinuerliga variabler)</a></li>
<li class="chapter" data-level="24.3.4" data-path="modellering-basics.html"><a href="modellering-basics.html#transformationer"><i class="fa fa-check"></i><b>24.3.4</b> Transformationer</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="modellering-basics.html"><a href="modellering-basics.html#missing-values-3"><i class="fa fa-check"></i><b>24.4</b> Missing values</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="modellering-basics.html"><a href="modellering-basics.html#andra-modell-familjer"><i class="fa fa-check"></i><b>24.4.1</b> Andra modell-familjer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="bygga-modeller-i-r.html"><a href="bygga-modeller-i-r.html"><i class="fa fa-check"></i><b>25</b> Bygga modeller i R</a>
<ul>
<li class="chapter" data-level="25.1" data-path="bygga-modeller-i-r.html"><a href="bygga-modeller-i-r.html#varför-är-diamanter-av-låg-kvalitet-dyrare"><i class="fa fa-check"></i><b>25.1</b> Varför är diamanter av låg kvalitet dyrare?</a>
<ul>
<li class="chapter" data-level="25.1.1" data-path="bygga-modeller-i-r.html"><a href="bygga-modeller-i-r.html#sambandet-pris-och-karat"><i class="fa fa-check"></i><b>25.1.1</b> Sambandet pris och karat</a></li>
<li class="chapter" data-level="25.1.2" data-path="bygga-modeller-i-r.html"><a href="bygga-modeller-i-r.html#en-mer-komplicerad-modell"><i class="fa fa-check"></i><b>25.1.2</b> En mer komplicerad modell</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="bygga-modeller-i-r.html"><a href="bygga-modeller-i-r.html#vad-är-det-som-påverkar-antalet-dagliga-flighter"><i class="fa fa-check"></i><b>25.2</b> Vad är det som påverkar antalet dagliga flighter?</a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="bygga-modeller-i-r.html"><a href="bygga-modeller-i-r.html#veckodag"><i class="fa fa-check"></i><b>25.2.1</b> Veckodag</a></li>
<li class="chapter" data-level="25.2.2" data-path="bygga-modeller-i-r.html"><a href="bygga-modeller-i-r.html#lördags-effekten"><i class="fa fa-check"></i><b>25.2.2</b> Lördags-effekten</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="bygga-modeller-i-r.html"><a href="bygga-modeller-i-r.html#lära-mer-om-modellering"><i class="fa fa-check"></i><b>25.3</b> Lära mer om modellering</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="excel-och-r-1.html"><a href="excel-och-r-1.html"><i class="fa fa-check"></i><b>26</b> Excel och R</a>
<ul>
<li class="chapter" data-level="26.1" data-path="excel-och-r-1.html"><a href="excel-och-r-1.html#skriv-till-en-excelfil-1"><i class="fa fa-check"></i><b>26.1</b> Skriv till en excelfil</a></li>
<li class="chapter" data-level="26.2" data-path="excel-och-r-1.html"><a href="excel-och-r-1.html#läsa-in-excel-1"><i class="fa fa-check"></i><b>26.2</b> Läsa in excel</a></li>
<li class="chapter" data-level="26.3" data-path="excel-och-r-1.html"><a href="excel-och-r-1.html#ytterligare-resurser-för-att-hantera-excel-filer-i-r-1"><i class="fa fa-check"></i><b>26.3</b> Ytterligare resurser för att hantera excel-filer i R</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html"><i class="fa fa-check"></i><b>27</b> Grafik för att kommunicera</a>
<ul>
<li class="chapter" data-level="27.1" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#etiketter-labels"><i class="fa fa-check"></i><b>27.1</b> Etiketter (labels)</a></li>
<li class="chapter" data-level="27.2" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#annoteringar"><i class="fa fa-check"></i><b>27.2</b> Annoteringar</a></li>
<li class="chapter" data-level="27.3" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#scales"><i class="fa fa-check"></i><b>27.3</b> Scales</a>
<ul>
<li class="chapter" data-level="27.3.1" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#axis-ticks-och-teckenförklaringar"><i class="fa fa-check"></i><b>27.3.1</b> Axis ticks och teckenförklaringar</a></li>
<li class="chapter" data-level="27.3.2" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#teckenförklaringens-legend-layout"><i class="fa fa-check"></i><b>27.3.2</b> Teckenförklaringens (legend) layout</a></li>
<li class="chapter" data-level="27.3.3" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#byta-ut-en-scale"><i class="fa fa-check"></i><b>27.3.3</b> Byta ut en scale</a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#zooming"><i class="fa fa-check"></i><b>27.4</b> Zooming</a>
<ul>
<li class="chapter" data-level="27.4.1" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#teman-themes"><i class="fa fa-check"></i><b>27.4.1</b> Teman (themes)</a></li>
</ul></li>
<li class="chapter" data-level="27.5" data-path="grafik-för-att-kommunicera.html"><a href="grafik-för-att-kommunicera.html#spara-graferna"><i class="fa fa-check"></i><b>27.5</b> Spara graferna</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="introduktion-11.html"><a href="introduktion-11.html"><i class="fa fa-check"></i><b>28</b> Introduktion</a>
<ul>
<li class="chapter" data-level="28.1" data-path="introduktion-11.html"><a href="introduktion-11.html#basics-2"><i class="fa fa-check"></i><b>28.1</b> Basics</a></li>
<li class="chapter" data-level="28.2" data-path="introduktion-11.html"><a href="introduktion-11.html#r-konsolen-1"><i class="fa fa-check"></i><b>28.2</b> R-konsolen</a></li>
<li class="chapter" data-level="28.3" data-path="introduktion-11.html"><a href="introduktion-11.html#rstudio-1"><i class="fa fa-check"></i><b>28.3</b> RStudio</a></li>
<li class="chapter" data-level="28.4" data-path="introduktion-11.html"><a href="introduktion-11.html#hjälpfunktioner-1"><i class="fa fa-check"></i><b>28.4</b> Hjälpfunktioner</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="utforska-data-1.html"><a href="utforska-data-1.html"><i class="fa fa-check"></i><b>29</b> Utforska data</a></li>
<li class="chapter" data-level="30" data-path="visualisering-1.html"><a href="visualisering-1.html"><i class="fa fa-check"></i><b>30</b> Visualisering</a>
<ul>
<li class="chapter" data-level="30.1" data-path="visualisering-1.html"><a href="visualisering-1.html#ett-första-diagram-1"><i class="fa fa-check"></i><b>30.1</b> Ett första diagram</a>
<ul>
<li class="chapter" data-level="30.1.1" data-path="visualisering-1.html"><a href="visualisering-1.html#ladda-data-1"><i class="fa fa-check"></i><b>30.1.1</b> Ladda data</a></li>
<li class="chapter" data-level="30.1.2" data-path="visualisering-1.html"><a href="visualisering-1.html#skapa-en-ggplot-1"><i class="fa fa-check"></i><b>30.1.2</b> Skapa en ggplot</a></li>
</ul></li>
<li class="chapter" data-level="30.2" data-path="visualisering-1.html"><a href="visualisering-1.html#en-grafikmall-1"><i class="fa fa-check"></i><b>30.2</b> En grafikmall</a></li>
<li class="chapter" data-level="30.3" data-path="visualisering-1.html"><a href="visualisering-1.html#övningar-28"><i class="fa fa-check"></i><b>30.3</b> Övningar</a></li>
<li class="chapter" data-level="30.4" data-path="visualisering-1.html"><a href="visualisering-1.html#aes-funktionen-och-mappings-1"><i class="fa fa-check"></i><b>30.4</b> <code>aes()</code>-funktionen och mappings</a></li>
<li class="chapter" data-level="30.5" data-path="visualisering-1.html"><a href="visualisering-1.html#övningar-29"><i class="fa fa-check"></i><b>30.5</b> Övningar</a></li>
<li class="chapter" data-level="30.6" data-path="visualisering-1.html"><a href="visualisering-1.html#vanliga-problem-1"><i class="fa fa-check"></i><b>30.6</b> Vanliga problem</a></li>
<li class="chapter" data-level="30.7" data-path="visualisering-1.html"><a href="visualisering-1.html#facets-1"><i class="fa fa-check"></i><b>30.7</b> Facets</a></li>
<li class="chapter" data-level="30.8" data-path="visualisering-1.html"><a href="visualisering-1.html#övningar-30"><i class="fa fa-check"></i><b>30.8</b> Övningar</a></li>
<li class="chapter" data-level="30.9" data-path="visualisering-1.html"><a href="visualisering-1.html#geometriska-objekt---geoms-1"><i class="fa fa-check"></i><b>30.9</b> “Geometriska” objekt - geoms</a></li>
<li class="chapter" data-level="30.10" data-path="visualisering-1.html"><a href="visualisering-1.html#övningar-31"><i class="fa fa-check"></i><b>30.10</b> Övningar</a></li>
<li class="chapter" data-level="30.11" data-path="visualisering-1.html"><a href="visualisering-1.html#statistiska-transformationer-1"><i class="fa fa-check"></i><b>30.11</b> Statistiska transformationer</a></li>
<li class="chapter" data-level="30.12" data-path="visualisering-1.html"><a href="visualisering-1.html#övningar-32"><i class="fa fa-check"></i><b>30.12</b> Övningar</a></li>
<li class="chapter" data-level="30.13" data-path="visualisering-1.html"><a href="visualisering-1.html#positionering-1"><i class="fa fa-check"></i><b>30.13</b> Positionering</a></li>
<li class="chapter" data-level="30.14" data-path="visualisering-1.html"><a href="visualisering-1.html#övningar-33"><i class="fa fa-check"></i><b>30.14</b> Övningar</a></li>
<li class="chapter" data-level="30.15" data-path="visualisering-1.html"><a href="visualisering-1.html#koordinatsystem-1"><i class="fa fa-check"></i><b>30.15</b> Koordinatsystem</a></li>
<li class="chapter" data-level="30.16" data-path="visualisering-1.html"><a href="visualisering-1.html#övningar-34"><i class="fa fa-check"></i><b>30.16</b> Övningar</a></li>
<li class="chapter" data-level="30.17" data-path="visualisering-1.html"><a href="visualisering-1.html#the-layered-grammar-of-graphics-1"><i class="fa fa-check"></i><b>30.17</b> “The layered grammar of graphics”</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="workflow-basics-1.html"><a href="workflow-basics-1.html"><i class="fa fa-check"></i><b>31</b> Workflow: Basics</a>
<ul>
<li class="chapter" data-level="31.1" data-path="workflow-basics-1.html"><a href="workflow-basics-1.html#skriva-kod-1"><i class="fa fa-check"></i><b>31.1</b> Skriva kod</a></li>
<li class="chapter" data-level="31.2" data-path="workflow-basics-1.html"><a href="workflow-basics-1.html#anropa-funktioner-1"><i class="fa fa-check"></i><b>31.2</b> Anropa funktioner</a></li>
<li class="chapter" data-level="31.3" data-path="workflow-basics-1.html"><a href="workflow-basics-1.html#övningar-35"><i class="fa fa-check"></i><b>31.3</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="32" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html"><i class="fa fa-check"></i><b>32</b> Transformering av data</a>
<ul>
<li class="chapter" data-level="32.1" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#introduktion-12"><i class="fa fa-check"></i><b>32.1</b> Introduktion</a></li>
<li class="chapter" data-level="32.2" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#förberedelser-1"><i class="fa fa-check"></i><b>32.2</b> Förberedelser</a></li>
<li class="chapter" data-level="32.3" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#dplyr-grunder-1"><i class="fa fa-check"></i><b>32.3</b> <code>dplyr</code> grunder</a>
<ul>
<li class="chapter" data-level="32.3.1" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#filtrera-raderposter-med-filter-1"><i class="fa fa-check"></i><b>32.3.1</b> Filtrera rader/poster med <code>filter()</code></a></li>
</ul></li>
<li class="chapter" data-level="32.4" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#övningar-36"><i class="fa fa-check"></i><b>32.4</b> Övningar</a></li>
<li class="chapter" data-level="32.5" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#arrangera-poster-med-arrange-1"><i class="fa fa-check"></i><b>32.5</b> Arrangera poster med <code>arrange()</code></a></li>
<li class="chapter" data-level="32.6" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#övningar-37"><i class="fa fa-check"></i><b>32.6</b> Övningar</a></li>
<li class="chapter" data-level="32.7" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#välj-kolumner-med-select-1"><i class="fa fa-check"></i><b>32.7</b> Välj kolumner med <code>select()</code></a></li>
<li class="chapter" data-level="32.8" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#övningar-38"><i class="fa fa-check"></i><b>32.8</b> Övningar</a></li>
<li class="chapter" data-level="32.9" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#lägg-till-flera-variabler-med-hjälp-av-mutate-1"><i class="fa fa-check"></i><b>32.9</b> Lägg till flera variabler med hjälp av <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="32.9.1" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#funktioner-och-operatorer-att-användas-med-mutate-1"><i class="fa fa-check"></i><b>32.9.1</b> Funktioner och operatorer att användas med <code>mutate()</code></a></li>
</ul></li>
<li class="chapter" data-level="32.10" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#övningar-39"><i class="fa fa-check"></i><b>32.10</b> Övningar</a></li>
<li class="chapter" data-level="32.11" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#grupperade-summeringar-med-summarise-1"><i class="fa fa-check"></i><b>32.11</b> Grupperade summeringar med <code>summarise()</code></a></li>
<li class="chapter" data-level="32.12" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#kombinera-multipla-operationer-med-the-pipe-1"><i class="fa fa-check"></i><b>32.12</b> Kombinera multipla operationer med the pipe</a></li>
<li class="chapter" data-level="32.13" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#missing-values-4"><i class="fa fa-check"></i><b>32.13</b> Missing values</a></li>
<li class="chapter" data-level="32.14" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#antal-counts-1"><i class="fa fa-check"></i><b>32.14</b> Antal (counts)</a></li>
<li class="chapter" data-level="32.15" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#användbara-summeringsfunktioner-1"><i class="fa fa-check"></i><b>32.15</b> Användbara summeringsfunktioner</a></li>
<li class="chapter" data-level="32.16" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#gruppera-med-flera-variabler-1"><i class="fa fa-check"></i><b>32.16</b> Gruppera med flera variabler</a></li>
<li class="chapter" data-level="32.17" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#av-gruppera-1"><i class="fa fa-check"></i><b>32.17</b> Av-gruppera</a></li>
<li class="chapter" data-level="32.18" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#övningar-40"><i class="fa fa-check"></i><b>32.18</b> Övningar</a></li>
<li class="chapter" data-level="32.19" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#grupperade-beräkningar-och-filtreringar-1"><i class="fa fa-check"></i><b>32.19</b> Grupperade beräkningar och filtreringar</a></li>
<li class="chapter" data-level="32.20" data-path="transformering-av-data-1.html"><a href="transformering-av-data-1.html#övningar-41"><i class="fa fa-check"></i><b>32.20</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="arbetsflöde-scripts-1.html"><a href="arbetsflöde-scripts-1.html"><i class="fa fa-check"></i><b>33</b> Arbetsflöde: scripts</a>
<ul>
<li class="chapter" data-level="33.1" data-path="arbetsflöde-scripts-1.html"><a href="arbetsflöde-scripts-1.html#att-köra-kod-1"><i class="fa fa-check"></i><b>33.1</b> Att köra kod</a></li>
<li class="chapter" data-level="33.2" data-path="arbetsflöde-scripts-1.html"><a href="arbetsflöde-scripts-1.html#diagnostics-1"><i class="fa fa-check"></i><b>33.2</b> Diagnostics</a></li>
<li class="chapter" data-level="33.3" data-path="arbetsflöde-scripts-1.html"><a href="arbetsflöde-scripts-1.html#praktik-1"><i class="fa fa-check"></i><b>33.3</b> Praktik</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html"><i class="fa fa-check"></i><b>34</b> Explorativ analys av data</a>
<ul>
<li class="chapter" data-level="34.1" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#introduktion-13"><i class="fa fa-check"></i><b>34.1</b> Introduktion</a></li>
<li class="chapter" data-level="34.2" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#frågor-1"><i class="fa fa-check"></i><b>34.2</b> Frågor</a></li>
<li class="chapter" data-level="34.3" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#variation-1"><i class="fa fa-check"></i><b>34.3</b> Variation</a></li>
<li class="chapter" data-level="34.4" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#visualisera-fördelningar-1"><i class="fa fa-check"></i><b>34.4</b> Visualisera fördelningar</a></li>
<li class="chapter" data-level="34.5" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#outliers-1"><i class="fa fa-check"></i><b>34.5</b> Outliers</a></li>
<li class="chapter" data-level="34.6" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#övningar-42"><i class="fa fa-check"></i><b>34.6</b> Övningar</a></li>
<li class="chapter" data-level="34.7" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#missing-values-5"><i class="fa fa-check"></i><b>34.7</b> Missing values</a></li>
<li class="chapter" data-level="34.8" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#samvarians---covariance-1"><i class="fa fa-check"></i><b>34.8</b> Samvarians - covariance</a>
<ul>
<li class="chapter" data-level="34.8.1" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#en-kategorisk-och-en-kontinuerlig-variabel-1"><i class="fa fa-check"></i><b>34.8.1</b> En kategorisk och en kontinuerlig variabel</a></li>
<li class="chapter" data-level="34.8.2" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#övningar-43"><i class="fa fa-check"></i><b>34.8.2</b> Övningar</a></li>
<li class="chapter" data-level="34.8.3" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#två-kategoriska-variabler-1"><i class="fa fa-check"></i><b>34.8.3</b> Två kategoriska variabler</a></li>
<li class="chapter" data-level="34.8.4" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#två-kontinuerliga-variabler-1"><i class="fa fa-check"></i><b>34.8.4</b> Två kontinuerliga variabler</a></li>
</ul></li>
<li class="chapter" data-level="34.9" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#ggplot2-calls-1"><i class="fa fa-check"></i><b>34.9</b> <code>ggplot2</code> calls</a></li>
<li class="chapter" data-level="34.10" data-path="explorativ-analys-av-data-1.html"><a href="explorativ-analys-av-data-1.html#att-lära-mer-1"><i class="fa fa-check"></i><b>34.10</b> Att lära mer</a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="arbetsflöde-projekt-1.html"><a href="arbetsflöde-projekt-1.html"><i class="fa fa-check"></i><b>35</b> Arbetsflöde: Projekt</a>
<ul>
<li class="chapter" data-level="35.1" data-path="arbetsflöde-projekt-1.html"><a href="arbetsflöde-projekt-1.html#vad-är-viktigt-1"><i class="fa fa-check"></i><b>35.1</b> Vad är viktigt?</a></li>
<li class="chapter" data-level="35.2" data-path="arbetsflöde-projekt-1.html"><a href="arbetsflöde-projekt-1.html#vart-lever-analysen-arbetsbiblioteket-1"><i class="fa fa-check"></i><b>35.2</b> Vart lever analysen? Arbetsbiblioteket</a></li>
<li class="chapter" data-level="35.3" data-path="arbetsflöde-projekt-1.html"><a href="arbetsflöde-projekt-1.html#sökvägar-och-bibliotekmappar-1"><i class="fa fa-check"></i><b>35.3</b> Sökvägar och bibliotek/mappar</a></li>
<li class="chapter" data-level="35.4" data-path="arbetsflöde-projekt-1.html"><a href="arbetsflöde-projekt-1.html#rstudio-projects-viktigt-1"><i class="fa fa-check"></i><b>35.4</b> RStudio projects VIKTIGT!</a></li>
<li class="chapter" data-level="35.5" data-path="arbetsflöde-projekt-1.html"><a href="arbetsflöde-projekt-1.html#sammanfattningsvis-1"><i class="fa fa-check"></i><b>35.5</b> Sammanfattningsvis</a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="wrangle-att-brottas-med-data-1.html"><a href="wrangle-att-brottas-med-data-1.html"><i class="fa fa-check"></i><b>36</b> Wrangle - att brottas med data</a>
<ul>
<li class="chapter" data-level="36.1" data-path="wrangle-att-brottas-med-data-1.html"><a href="wrangle-att-brottas-med-data-1.html#introduktion-14"><i class="fa fa-check"></i><b>36.1</b> Introduktion</a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="tibbles-2.html"><a href="tibbles-2.html"><i class="fa fa-check"></i><b>37</b> Tibbles</a>
<ul>
<li class="chapter" data-level="37.1" data-path="tibbles-2.html"><a href="tibbles-2.html#skapa-tibbles-1"><i class="fa fa-check"></i><b>37.1</b> Skapa tibbles</a>
<ul>
<li class="chapter" data-level="37.1.1" data-path="tibbles-2.html"><a href="tibbles-2.html#tibbles-vs-data-frames-1"><i class="fa fa-check"></i><b>37.1.1</b> Tibbles vs data frames</a></li>
</ul></li>
<li class="chapter" data-level="37.2" data-path="tibbles-2.html"><a href="tibbles-2.html#utskrift-printing-1"><i class="fa fa-check"></i><b>37.2</b> Utskrift (Printing)</a></li>
<li class="chapter" data-level="37.3" data-path="tibbles-2.html"><a href="tibbles-2.html#urval-1"><i class="fa fa-check"></i><b>37.3</b> Urval</a></li>
<li class="chapter" data-level="37.4" data-path="tibbles-2.html"><a href="tibbles-2.html#använda-äldre-kod-1"><i class="fa fa-check"></i><b>37.4</b> Använda äldre kod</a></li>
</ul></li>
<li class="chapter" data-level="38" data-path="importera-data-1.html"><a href="importera-data-1.html"><i class="fa fa-check"></i><b>38</b> Importera data</a>
<ul>
<li class="chapter" data-level="38.1" data-path="importera-data-1.html"><a href="importera-data-1.html#jämförelse-med-base-r-1"><i class="fa fa-check"></i><b>38.1</b> Jämförelse med base R</a></li>
<li class="chapter" data-level="38.2" data-path="importera-data-1.html"><a href="importera-data-1.html#övningar-44"><i class="fa fa-check"></i><b>38.2</b> Övningar</a></li>
<li class="chapter" data-level="38.3" data-path="importera-data-1.html"><a href="importera-data-1.html#omvandla-vektorer-1"><i class="fa fa-check"></i><b>38.3</b> Omvandla vektorer</a>
<ul>
<li class="chapter" data-level="38.3.1" data-path="importera-data-1.html"><a href="importera-data-1.html#numeriska-variabler-1"><i class="fa fa-check"></i><b>38.3.1</b> Numeriska variabler</a></li>
<li class="chapter" data-level="38.3.2" data-path="importera-data-1.html"><a href="importera-data-1.html#textsträngar-1"><i class="fa fa-check"></i><b>38.3.2</b> Textsträngar</a></li>
<li class="chapter" data-level="38.3.3" data-path="importera-data-1.html"><a href="importera-data-1.html#kategoriska-data-1"><i class="fa fa-check"></i><b>38.3.3</b> Kategoriska data</a></li>
<li class="chapter" data-level="38.3.4" data-path="importera-data-1.html"><a href="importera-data-1.html#datum-och-tid-1"><i class="fa fa-check"></i><b>38.3.4</b> Datum och tid</a></li>
<li class="chapter" data-level="38.3.5" data-path="importera-data-1.html"><a href="importera-data-1.html#övningar-45"><i class="fa fa-check"></i><b>38.3.5</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="38.4" data-path="importera-data-1.html"><a href="importera-data-1.html#hur-readr-plockar-isär-parse-en-fil-1"><i class="fa fa-check"></i><b>38.4</b> Hur <code>readr</code> “plockar isär” (parse) en fil</a></li>
<li class="chapter" data-level="38.5" data-path="importera-data-1.html"><a href="importera-data-1.html#problem-1"><i class="fa fa-check"></i><b>38.5</b> Problem</a></li>
<li class="chapter" data-level="38.6" data-path="importera-data-1.html"><a href="importera-data-1.html#skriva-till-en-fil-1"><i class="fa fa-check"></i><b>38.6</b> Skriva till en fil</a></li>
<li class="chapter" data-level="38.7" data-path="importera-data-1.html"><a href="importera-data-1.html#andra-datatyper-1"><i class="fa fa-check"></i><b>38.7</b> Andra datatyper</a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="excel-och-r-2.html"><a href="excel-och-r-2.html"><i class="fa fa-check"></i><b>39</b> Excel och R</a>
<ul>
<li class="chapter" data-level="39.1" data-path="excel-och-r-2.html"><a href="excel-och-r-2.html#skriv-till-en-excelfil-2"><i class="fa fa-check"></i><b>39.1</b> Skriv till en excelfil</a></li>
<li class="chapter" data-level="39.2" data-path="excel-och-r-2.html"><a href="excel-och-r-2.html#läsa-in-excel-2"><i class="fa fa-check"></i><b>39.2</b> Läsa in excel</a></li>
<li class="chapter" data-level="39.3" data-path="excel-och-r-2.html"><a href="excel-och-r-2.html#ytterligare-resurser-för-att-hantera-excel-filer-i-r-2"><i class="fa fa-check"></i><b>39.3</b> Ytterligare resurser för att hantera excel-filer i R</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html"><i class="fa fa-check"></i><b>40</b> Städa data (tidy data)</a>
<ul>
<li class="chapter" data-level="40.1" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#introduktion-15"><i class="fa fa-check"></i><b>40.1</b> Introduktion</a></li>
<li class="chapter" data-level="40.2" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#spreading-and-gathering-1"><i class="fa fa-check"></i><b>40.2</b> Spreading and gathering</a>
<ul>
<li class="chapter" data-level="40.2.1" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#gathering-1"><i class="fa fa-check"></i><b>40.2.1</b> Gathering</a></li>
<li class="chapter" data-level="40.2.2" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#spreading-1"><i class="fa fa-check"></i><b>40.2.2</b> Spreading</a></li>
</ul></li>
<li class="chapter" data-level="40.3" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#övningar-46"><i class="fa fa-check"></i><b>40.3</b> Övningar</a></li>
<li class="chapter" data-level="40.4" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#separera-och-förena-1"><i class="fa fa-check"></i><b>40.4</b> Separera och förena</a>
<ul>
<li class="chapter" data-level="40.4.1" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#separate-1"><i class="fa fa-check"></i><b>40.4.1</b> Separate</a></li>
<li class="chapter" data-level="40.4.2" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#unite-1"><i class="fa fa-check"></i><b>40.4.2</b> Unite</a></li>
</ul></li>
<li class="chapter" data-level="40.5" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#övningar-47"><i class="fa fa-check"></i><b>40.5</b> Övningar</a></li>
<li class="chapter" data-level="40.6" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#missing-values-6"><i class="fa fa-check"></i><b>40.6</b> Missing values</a></li>
<li class="chapter" data-level="40.7" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#övningar-48"><i class="fa fa-check"></i><b>40.7</b> Övningar</a></li>
<li class="chapter" data-level="40.8" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#en-case-study-1"><i class="fa fa-check"></i><b>40.8</b> En case study</a></li>
<li class="chapter" data-level="40.9" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#övningar-49"><i class="fa fa-check"></i><b>40.9</b> Övningar</a></li>
<li class="chapter" data-level="40.10" data-path="städa-data-tidy-data-1.html"><a href="städa-data-tidy-data-1.html#non-tidy-data-1"><i class="fa fa-check"></i><b>40.10</b> Non-tidy data</a></li>
</ul></li>
<li class="chapter" data-level="41" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html"><i class="fa fa-check"></i><b>41</b> Relationer mellan datamängder</a>
<ul>
<li class="chapter" data-level="41.1" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#introduktion-16"><i class="fa fa-check"></i><b>41.1</b> Introduktion</a></li>
<li class="chapter" data-level="41.2" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#nycflights13-1"><i class="fa fa-check"></i><b>41.2</b> <code>nycflights13</code></a></li>
<li class="chapter" data-level="41.3" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#keys-1"><i class="fa fa-check"></i><b>41.3</b> Keys</a></li>
<li class="chapter" data-level="41.4" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#mutating-joins-1"><i class="fa fa-check"></i><b>41.4</b> <em>Mutating joins</em></a>
<ul>
<li class="chapter" data-level="41.4.1" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#att-förstå-joins-1"><i class="fa fa-check"></i><b>41.4.1</b> Att förstå <em>joins</em></a></li>
<li class="chapter" data-level="41.4.2" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#inner-join-1"><i class="fa fa-check"></i><b>41.4.2</b> Inner join</a></li>
<li class="chapter" data-level="41.4.3" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#outer-joins-1"><i class="fa fa-check"></i><b>41.4.3</b> Outer joins</a></li>
<li class="chapter" data-level="41.4.4" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#duplicate-keys-1"><i class="fa fa-check"></i><b>41.4.4</b> Duplicate keys</a></li>
<li class="chapter" data-level="41.4.5" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#definiera-nyckel-kolumner-key-columns-1"><i class="fa fa-check"></i><b>41.4.5</b> Definiera nyckel-kolumner (<em>key columns</em>)</a></li>
<li class="chapter" data-level="41.4.6" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#övningar-50"><i class="fa fa-check"></i><b>41.4.6</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="41.5" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#filtering-joins-1"><i class="fa fa-check"></i><b>41.5</b> <em>Filtering joins</em></a></li>
<li class="chapter" data-level="41.6" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#problem-med-joins-1"><i class="fa fa-check"></i><b>41.6</b> Problem med <em>joins</em></a></li>
<li class="chapter" data-level="41.7" data-path="relationer-mellan-datamängder-1.html"><a href="relationer-mellan-datamängder-1.html#set-operations-1"><i class="fa fa-check"></i><b>41.7</b> Set operations</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html"><i class="fa fa-check"></i><b>42</b> Textsträngar (strings)</a>
<ul>
<li class="chapter" data-level="42.1" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#introduktion-17"><i class="fa fa-check"></i><b>42.1</b> Introduktion</a></li>
<li class="chapter" data-level="42.2" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#basics-3"><i class="fa fa-check"></i><b>42.2</b> Basics</a>
<ul>
<li class="chapter" data-level="42.2.1" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#stringr-funktioner-1"><i class="fa fa-check"></i><b>42.2.1</b> <code>stringr</code>-funktioner</a></li>
<li class="chapter" data-level="42.2.2" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#kombinera-strängar-1"><i class="fa fa-check"></i><b>42.2.2</b> Kombinera strängar</a></li>
<li class="chapter" data-level="42.2.3" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#extrahera-delar-av-textsträngar-subsetting-1"><i class="fa fa-check"></i><b>42.2.3</b> Extrahera delar av textsträngar (subsetting)</a></li>
<li class="chapter" data-level="42.2.4" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#övningar-51"><i class="fa fa-check"></i><b>42.2.4</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="42.3" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#matcha-textmönster-med-hjälp-av-regular-expressions-1"><i class="fa fa-check"></i><b>42.3</b> Matcha textmönster med hjälp av <em>regular expressions</em></a>
<ul>
<li class="chapter" data-level="42.3.1" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#basic-matches-1"><i class="fa fa-check"></i><b>42.3.1</b> Basic matches</a></li>
<li class="chapter" data-level="42.3.2" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#ankare-anchors-1"><i class="fa fa-check"></i><b>42.3.2</b> Ankare (Anchors)</a></li>
<li class="chapter" data-level="42.3.3" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#tecken-klasser-1"><i class="fa fa-check"></i><b>42.3.3</b> Tecken-klasser</a></li>
<li class="chapter" data-level="42.3.4" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#repeterande-tecken-1"><i class="fa fa-check"></i><b>42.3.4</b> Repeterande tecken</a></li>
</ul></li>
<li class="chapter" data-level="42.4" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#verktyg-1"><i class="fa fa-check"></i><b>42.4</b> Verktyg</a>
<ul>
<li class="chapter" data-level="42.4.1" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#upptäck-matchningar-1"><i class="fa fa-check"></i><b>42.4.1</b> Upptäck matchningar</a></li>
<li class="chapter" data-level="42.4.2" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#övningar-54"><i class="fa fa-check"></i><b>42.4.2</b> Övningar</a></li>
<li class="chapter" data-level="42.4.3" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#extrahera-matchningar-1"><i class="fa fa-check"></i><b>42.4.3</b> Extrahera matchningar</a></li>
<li class="chapter" data-level="42.4.4" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#gruppereade-matchningar-1"><i class="fa fa-check"></i><b>42.4.4</b> Gruppereade matchningar</a></li>
<li class="chapter" data-level="42.4.5" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#ersätt-matchningar-1"><i class="fa fa-check"></i><b>42.4.5</b> Ersätt matchningar</a></li>
<li class="chapter" data-level="42.4.6" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#dela-upp-textsträngar-1"><i class="fa fa-check"></i><b>42.4.6</b> Dela upp textsträngar</a></li>
<li class="chapter" data-level="42.4.7" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#hitta-matchningar-1"><i class="fa fa-check"></i><b>42.4.7</b> Hitta matchningar</a></li>
</ul></li>
<li class="chapter" data-level="42.5" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#andra-typer-av-mönster-1"><i class="fa fa-check"></i><b>42.5</b> Andra typer av mönster</a></li>
<li class="chapter" data-level="42.6" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#andra-typer-av-regexps-1"><i class="fa fa-check"></i><b>42.6</b> Andra typer av regexps</a></li>
<li class="chapter" data-level="42.7" data-path="textsträngar-strings-1.html"><a href="textsträngar-strings-1.html#stringi-1"><i class="fa fa-check"></i><b>42.7</b> stringi</a></li>
</ul></li>
<li class="chapter" data-level="43" data-path="kategoriska-variabler-factors-1.html"><a href="kategoriska-variabler-factors-1.html"><i class="fa fa-check"></i><b>43</b> Kategoriska variabler (Factors)</a>
<ul>
<li class="chapter" data-level="43.1" data-path="kategoriska-variabler-factors-1.html"><a href="kategoriska-variabler-factors-1.html#introduktion-18"><i class="fa fa-check"></i><b>43.1</b> Introduktion</a></li>
<li class="chapter" data-level="43.2" data-path="kategoriska-variabler-factors-1.html"><a href="kategoriska-variabler-factors-1.html#skapa-factors-1"><i class="fa fa-check"></i><b>43.2</b> Skapa factors</a></li>
<li class="chapter" data-level="43.3" data-path="kategoriska-variabler-factors-1.html"><a href="kategoriska-variabler-factors-1.html#general-social-survey-1"><i class="fa fa-check"></i><b>43.3</b> General Social Survey</a></li>
<li class="chapter" data-level="43.4" data-path="kategoriska-variabler-factors-1.html"><a href="kategoriska-variabler-factors-1.html#modifiera-ordningen-av-factors-1"><i class="fa fa-check"></i><b>43.4</b> Modifiera ordningen av factors</a></li>
<li class="chapter" data-level="43.5" data-path="kategoriska-variabler-factors-1.html"><a href="kategoriska-variabler-factors-1.html#modifiera-factor-levels-1"><i class="fa fa-check"></i><b>43.5</b> Modifiera factor levels</a></li>
</ul></li>
<li class="chapter" data-level="44" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html"><i class="fa fa-check"></i><b>44</b> Datum och tidsformat</a>
<ul>
<li class="chapter" data-level="44.1" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#introduktion-19"><i class="fa fa-check"></i><b>44.1</b> Introduktion</a></li>
<li class="chapter" data-level="44.2" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#skapa-datum-och-tid-1"><i class="fa fa-check"></i><b>44.2</b> Skapa datum och tid</a>
<ul>
<li class="chapter" data-level="44.2.1" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#från-textsträngar-1"><i class="fa fa-check"></i><b>44.2.1</b> Från textsträngar</a></li>
<li class="chapter" data-level="44.2.2" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#från-enskilda-kompnenter-1"><i class="fa fa-check"></i><b>44.2.2</b> Från enskilda kompnenter</a></li>
<li class="chapter" data-level="44.2.3" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#från-andra-datumtid-format-1"><i class="fa fa-check"></i><b>44.2.3</b> Från andra datum/tid-format</a></li>
<li class="chapter" data-level="44.2.4" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#övningar-55"><i class="fa fa-check"></i><b>44.2.4</b> Övningar</a></li>
</ul></li>
<li class="chapter" data-level="44.3" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#datumtid-komponenter-1"><i class="fa fa-check"></i><b>44.3</b> Datum/tid-komponenter</a>
<ul>
<li class="chapter" data-level="44.3.1" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#extrahera-komponenter-1"><i class="fa fa-check"></i><b>44.3.1</b> Extrahera komponenter</a></li>
<li class="chapter" data-level="44.3.2" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#avrundning-1"><i class="fa fa-check"></i><b>44.3.2</b> Avrundning</a></li>
<li class="chapter" data-level="44.3.3" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#ange-komponenter-1"><i class="fa fa-check"></i><b>44.3.3</b> Ange komponenter</a></li>
</ul></li>
<li class="chapter" data-level="44.4" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#tidsintervall-1"><i class="fa fa-check"></i><b>44.4</b> Tidsintervall</a>
<ul>
<li class="chapter" data-level="44.4.1" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#varaktighet-1"><i class="fa fa-check"></i><b>44.4.1</b> Varaktighet</a></li>
<li class="chapter" data-level="44.4.2" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#perioder-1"><i class="fa fa-check"></i><b>44.4.2</b> Perioder</a></li>
<li class="chapter" data-level="44.4.3" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#intervall-1"><i class="fa fa-check"></i><b>44.4.3</b> Intervall</a></li>
</ul></li>
<li class="chapter" data-level="44.5" data-path="datum-och-tidsformat-1.html"><a href="datum-och-tidsformat-1.html#summering-1"><i class="fa fa-check"></i><b>44.5</b> Summering</a></li>
</ul></li>
<li class="chapter" data-level="45" data-path="programmering-i-r-1.html"><a href="programmering-i-r-1.html"><i class="fa fa-check"></i><b>45</b> Programmering i R</a>
<ul>
<li class="chapter" data-level="45.1" data-path="programmering-i-r-1.html"><a href="programmering-i-r-1.html#introduktion-20"><i class="fa fa-check"></i><b>45.1</b> Introduktion</a></li>
</ul></li>
<li class="chapter" data-level="46" data-path="pipes-1.html"><a href="pipes-1.html"><i class="fa fa-check"></i><b>46</b> Pipes</a></li>
<li class="chapter" data-level="47" data-path="funktioner-1.html"><a href="funktioner-1.html"><i class="fa fa-check"></i><b>47</b> Funktioner</a>
<ul>
<li class="chapter" data-level="47.1" data-path="funktioner-1.html"><a href="funktioner-1.html#när-bör-du-skapa-en-funktion-1"><i class="fa fa-check"></i><b>47.1</b> När bör du skapa en funktion?</a></li>
<li class="chapter" data-level="47.2" data-path="funktioner-1.html"><a href="funktioner-1.html#funktioner-är-till-för-människor-och-datorer-1"><i class="fa fa-check"></i><b>47.2</b> Funktioner är till för människor och datorer</a></li>
<li class="chapter" data-level="47.3" data-path="funktioner-1.html"><a href="funktioner-1.html#villkorlig-exekvering-1"><i class="fa fa-check"></i><b>47.3</b> Villkorlig exekvering</a>
<ul>
<li class="chapter" data-level="47.3.1" data-path="funktioner-1.html"><a href="funktioner-1.html#villkor-1"><i class="fa fa-check"></i><b>47.3.1</b> Villkor</a></li>
<li class="chapter" data-level="47.3.2" data-path="funktioner-1.html"><a href="funktioner-1.html#multipla-villkor-1"><i class="fa fa-check"></i><b>47.3.2</b> Multipla villkor</a></li>
</ul></li>
<li class="chapter" data-level="47.4" data-path="funktioner-1.html"><a href="funktioner-1.html#funktionsargument-1"><i class="fa fa-check"></i><b>47.4</b> Funktionsargument</a></li>
<li class="chapter" data-level="47.5" data-path="funktioner-1.html"><a href="funktioner-1.html#kolla-värden-1"><i class="fa fa-check"></i><b>47.5</b> Kolla värden</a></li>
<li class="chapter" data-level="47.6" data-path="funktioner-1.html"><a href="funktioner-1.html#punkt-punkt-punkt-1"><i class="fa fa-check"></i><b>47.6</b> punkt-punkt-punkt</a></li>
<li class="chapter" data-level="47.7" data-path="funktioner-1.html"><a href="funktioner-1.html#returnera-värden-1"><i class="fa fa-check"></i><b>47.7</b> Returnera värden</a>
<ul>
<li class="chapter" data-level="47.7.1" data-path="funktioner-1.html"><a href="funktioner-1.html#explicita-return-uttryck-1"><i class="fa fa-check"></i><b>47.7.1</b> Explicita <code>return</code>-uttryck</a></li>
</ul></li>
<li class="chapter" data-level="47.8" data-path="funktioner-1.html"><a href="funktioner-1.html#skriva-funktioner-med-hjälp-av-pipes-1"><i class="fa fa-check"></i><b>47.8</b> Skriva funktioner med hjälp av pipes</a></li>
<li class="chapter" data-level="47.9" data-path="funktioner-1.html"><a href="funktioner-1.html#environment-svårt-hitta-ett-svenskt-uttryck-1"><i class="fa fa-check"></i><b>47.9</b> Environment (svårt hitta ett svenskt uttryck)</a></li>
</ul></li>
<li class="chapter" data-level="48" data-path="vektorer-1.html"><a href="vektorer-1.html"><i class="fa fa-check"></i><b>48</b> Vektorer</a>
<ul>
<li class="chapter" data-level="48.1" data-path="vektorer-1.html"><a href="vektorer-1.html#introduktion-21"><i class="fa fa-check"></i><b>48.1</b> Introduktion</a></li>
<li class="chapter" data-level="48.2" data-path="vektorer-1.html"><a href="vektorer-1.html#atomic-vectors-1"><i class="fa fa-check"></i><b>48.2</b> Atomic vectors</a>
<ul>
<li class="chapter" data-level="48.2.1" data-path="vektorer-1.html"><a href="vektorer-1.html#logical-vectors-1"><i class="fa fa-check"></i><b>48.2.1</b> Logical vectors</a></li>
<li class="chapter" data-level="48.2.2" data-path="vektorer-1.html"><a href="vektorer-1.html#numeriska-vektorer-1"><i class="fa fa-check"></i><b>48.2.2</b> Numeriska vektorer</a></li>
<li class="chapter" data-level="48.2.3" data-path="vektorer-1.html"><a href="vektorer-1.html#character-1"><i class="fa fa-check"></i><b>48.2.3</b> Character</a></li>
<li class="chapter" data-level="48.2.4" data-path="vektorer-1.html"><a href="vektorer-1.html#använda-atomic-vectors-1"><i class="fa fa-check"></i><b>48.2.4</b> Använda atomic vectors</a></li>
<li class="chapter" data-level="48.2.5" data-path="vektorer-1.html"><a href="vektorer-1.html#scalars-och-recycling-1"><i class="fa fa-check"></i><b>48.2.5</b> Scalars och recycling</a></li>
<li class="chapter" data-level="48.2.6" data-path="vektorer-1.html"><a href="vektorer-1.html#rekursiva-vektorer-lists-1"><i class="fa fa-check"></i><b>48.2.6</b> Rekursiva vektorer (lists)</a></li>
<li class="chapter" data-level="48.2.7" data-path="vektorer-1.html"><a href="vektorer-1.html#attribut-1"><i class="fa fa-check"></i><b>48.2.7</b> Attribut</a></li>
<li class="chapter" data-level="48.2.8" data-path="vektorer-1.html"><a href="vektorer-1.html#förstärkta-vektorer-augmented-vectors-1"><i class="fa fa-check"></i><b>48.2.8</b> Förstärkta vektorer (Augmented vectors)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="49" data-path="itereringar-1.html"><a href="itereringar-1.html"><i class="fa fa-check"></i><b>49</b> Itereringar</a>
<ul>
<li class="chapter" data-level="49.1" data-path="itereringar-1.html"><a href="itereringar-1.html#for-loops-1"><i class="fa fa-check"></i><b>49.1</b> For-loops</a></li>
<li class="chapter" data-level="49.2" data-path="itereringar-1.html"><a href="itereringar-1.html#variationer-av-for-loopar-1"><i class="fa fa-check"></i><b>49.2</b> Variationer av for-loopar</a>
<ul>
<li class="chapter" data-level="49.2.1" data-path="itereringar-1.html"><a href="itereringar-1.html#modifiera-ett-existerande-obkjekt-1"><i class="fa fa-check"></i><b>49.2.1</b> Modifiera ett existerande obkjekt</a></li>
<li class="chapter" data-level="49.2.2" data-path="itereringar-1.html"><a href="itereringar-1.html#när-längden-på-output-inte-är-känd-1"><i class="fa fa-check"></i><b>49.2.2</b> När längden på output inte är känd</a></li>
<li class="chapter" data-level="49.2.3" data-path="itereringar-1.html"><a href="itereringar-1.html#när-sekvensens-längd-är-okänd-1"><i class="fa fa-check"></i><b>49.2.3</b> När sekvensens längd är okänd</a></li>
</ul></li>
<li class="chapter" data-level="49.3" data-path="itereringar-1.html"><a href="itereringar-1.html#for-loops-vs.-funktioner-1"><i class="fa fa-check"></i><b>49.3</b> for-loops vs. Funktioner</a></li>
<li class="chapter" data-level="49.4" data-path="itereringar-1.html"><a href="itereringar-1.html#mappningsfunktioner-1"><i class="fa fa-check"></i><b>49.4</b> Mappningsfunktioner</a>
<ul>
<li class="chapter" data-level="49.4.1" data-path="itereringar-1.html"><a href="itereringar-1.html#genvägar-1"><i class="fa fa-check"></i><b>49.4.1</b> Genvägar</a></li>
</ul></li>
<li class="chapter" data-level="49.5" data-path="itereringar-1.html"><a href="itereringar-1.html#hantera-errors-1"><i class="fa fa-check"></i><b>49.5</b> Hantera errors</a></li>
</ul></li>
<li class="chapter" data-level="50" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>50</b> Introduction</a></li>
<li class="chapter" data-level="51" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html"><i class="fa fa-check"></i><b>51</b> Modellering: basics</a>
<ul>
<li class="chapter" data-level="51.1" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#en-enkel-modell-1"><i class="fa fa-check"></i><b>51.1</b> En enkel modell</a></li>
<li class="chapter" data-level="51.2" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#visualisera-modeller-1"><i class="fa fa-check"></i><b>51.2</b> Visualisera modeller</a>
<ul>
<li class="chapter" data-level="51.2.1" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#prediktioner-1"><i class="fa fa-check"></i><b>51.2.1</b> Prediktioner</a></li>
<li class="chapter" data-level="51.2.2" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#residualer-1"><i class="fa fa-check"></i><b>51.2.2</b> Residualer</a></li>
</ul></li>
<li class="chapter" data-level="51.3" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#formler-och-modell-familjer-1"><i class="fa fa-check"></i><b>51.3</b> Formler och modell-familjer</a>
<ul>
<li class="chapter" data-level="51.3.1" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#kategoriska-variabler-1"><i class="fa fa-check"></i><b>51.3.1</b> Kategoriska variabler</a></li>
<li class="chapter" data-level="51.3.2" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#interaktioner-1"><i class="fa fa-check"></i><b>51.3.2</b> Interaktioner</a></li>
<li class="chapter" data-level="51.3.3" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#interaktioner-två-kontinuerliga-variabler-1"><i class="fa fa-check"></i><b>51.3.3</b> Interaktioner (två kontinuerliga variabler)</a></li>
<li class="chapter" data-level="51.3.4" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#transformationer-1"><i class="fa fa-check"></i><b>51.3.4</b> Transformationer</a></li>
</ul></li>
<li class="chapter" data-level="51.4" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#missing-values-7"><i class="fa fa-check"></i><b>51.4</b> Missing values</a>
<ul>
<li class="chapter" data-level="51.4.1" data-path="modellering-basics-1.html"><a href="modellering-basics-1.html#andra-modell-familjer-1"><i class="fa fa-check"></i><b>51.4.1</b> Andra modell-familjer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="52" data-path="bygga-modeller-i-r-1.html"><a href="bygga-modeller-i-r-1.html"><i class="fa fa-check"></i><b>52</b> Bygga modeller i R</a>
<ul>
<li class="chapter" data-level="52.1" data-path="bygga-modeller-i-r-1.html"><a href="bygga-modeller-i-r-1.html#varför-är-diamanter-av-låg-kvalitet-dyrare-1"><i class="fa fa-check"></i><b>52.1</b> Varför är diamanter av låg kvalitet dyrare?</a>
<ul>
<li class="chapter" data-level="52.1.1" data-path="bygga-modeller-i-r-1.html"><a href="bygga-modeller-i-r-1.html#sambandet-pris-och-karat-1"><i class="fa fa-check"></i><b>52.1.1</b> Sambandet pris och karat</a></li>
<li class="chapter" data-level="52.1.2" data-path="bygga-modeller-i-r-1.html"><a href="bygga-modeller-i-r-1.html#en-mer-komplicerad-modell-1"><i class="fa fa-check"></i><b>52.1.2</b> En mer komplicerad modell</a></li>
</ul></li>
<li class="chapter" data-level="52.2" data-path="bygga-modeller-i-r-1.html"><a href="bygga-modeller-i-r-1.html#vad-är-det-som-påverkar-antalet-dagliga-flighter-1"><i class="fa fa-check"></i><b>52.2</b> Vad är det som påverkar antalet dagliga flighter?</a>
<ul>
<li class="chapter" data-level="52.2.1" data-path="bygga-modeller-i-r-1.html"><a href="bygga-modeller-i-r-1.html#veckodag-1"><i class="fa fa-check"></i><b>52.2.1</b> Veckodag</a></li>
<li class="chapter" data-level="52.2.2" data-path="bygga-modeller-i-r-1.html"><a href="bygga-modeller-i-r-1.html#lördags-effekten-1"><i class="fa fa-check"></i><b>52.2.2</b> Lördags-effekten</a></li>
</ul></li>
<li class="chapter" data-level="52.3" data-path="bygga-modeller-i-r-1.html"><a href="bygga-modeller-i-r-1.html#lära-mer-om-modellering-1"><i class="fa fa-check"></i><b>52.3</b> Lära mer om modellering</a></li>
</ul></li>
<li class="chapter" data-level="53" data-path="excel-och-r-3.html"><a href="excel-och-r-3.html"><i class="fa fa-check"></i><b>53</b> Excel och R</a>
<ul>
<li class="chapter" data-level="53.1" data-path="excel-och-r-3.html"><a href="excel-och-r-3.html#skriv-till-en-excelfil-3"><i class="fa fa-check"></i><b>53.1</b> Skriv till en excelfil</a></li>
<li class="chapter" data-level="53.2" data-path="excel-och-r-3.html"><a href="excel-och-r-3.html#läsa-in-excel-3"><i class="fa fa-check"></i><b>53.2</b> Läsa in excel</a></li>
<li class="chapter" data-level="53.3" data-path="excel-och-r-3.html"><a href="excel-och-r-3.html#ytterligare-resurser-för-att-hantera-excel-filer-i-r-3"><i class="fa fa-check"></i><b>53.3</b> Ytterligare resurser för att hantera excel-filer i R</a></li>
</ul></li>
<li class="chapter" data-level="54" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html"><i class="fa fa-check"></i><b>54</b> Grafik för att kommunicera</a>
<ul>
<li class="chapter" data-level="54.1" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#etiketter-labels-1"><i class="fa fa-check"></i><b>54.1</b> Etiketter (labels)</a></li>
<li class="chapter" data-level="54.2" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#annoteringar-1"><i class="fa fa-check"></i><b>54.2</b> Annoteringar</a></li>
<li class="chapter" data-level="54.3" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#scales-1"><i class="fa fa-check"></i><b>54.3</b> Scales</a>
<ul>
<li class="chapter" data-level="54.3.1" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#axis-ticks-och-teckenförklaringar-1"><i class="fa fa-check"></i><b>54.3.1</b> Axis ticks och teckenförklaringar</a></li>
<li class="chapter" data-level="54.3.2" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#teckenförklaringens-legend-layout-1"><i class="fa fa-check"></i><b>54.3.2</b> Teckenförklaringens (legend) layout</a></li>
<li class="chapter" data-level="54.3.3" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#byta-ut-en-scale-1"><i class="fa fa-check"></i><b>54.3.3</b> Byta ut en scale</a></li>
</ul></li>
<li class="chapter" data-level="54.4" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#zooming-1"><i class="fa fa-check"></i><b>54.4</b> Zooming</a>
<ul>
<li class="chapter" data-level="54.4.1" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#teman-themes-1"><i class="fa fa-check"></i><b>54.4.1</b> Teman (themes)</a></li>
</ul></li>
<li class="chapter" data-level="54.5" data-path="grafik-för-att-kommunicera-1.html"><a href="grafik-för-att-kommunicera-1.html#spara-graferna-1"><i class="fa fa-check"></i><b>54.5</b> Spara graferna</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Kurskompendium - introduktion till R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="transformering-av-data-1" class="section level1" number="32">
<h1><span class="header-section-number">32</span> Transformering av data</h1>
<div id="introduktion-12" class="section level2" number="32.1">
<h2><span class="header-section-number">32.1</span> Introduktion</h2>
<p>Visualisering är en viktig del i att förstå innehållet i datamängder men det är sällsynt att du får en datafil som är organiserad exakt som du vill ha den.</p>
<p>Ofta behöver du skapa några nya variabler eller summeringar, kanske du bara vill byta namn på variablerna eller ordna om observationerna för att förenkla hanteringen. I detta kapitel går vi igenom de viktigaste verktygen för att ordna data som du vill ha dem. Vi gör det med hjälp av modulen <code>dplyr</code> och ett dataset som innehåller information om flighter från New York City 2013.</p>
</div>
<div id="förberedelser-1" class="section level2" number="32.2">
<h2><span class="header-section-number">32.2</span> Förberedelser</h2>
<p>Vi börjar med att installera modulen <em>nycflights13</em>:</p>
<div class="sourceCode" id="cb1296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1296-1"><a href="transformering-av-data-1.html#cb1296-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;nycflights13&quot;</span>)</span></code></pre></div>
<p>Vi laddar in modulerna</p>
<div class="sourceCode" id="cb1297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1297-1"><a href="transformering-av-data-1.html#cb1297-1"></a><span class="kw">library</span>(nycflights13)</span>
<span id="cb1297-2"><a href="transformering-av-data-1.html#cb1297-2"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>När man laddar in <code>tidyverse</code> kommer ett antal felmeddelanden/varningar som talar om att <code>dplyr</code> skriver över några av funktionerna i <em>base R</em>, t.ex. <code>filter()</code> och <code>lag()</code>. Det är helt OK.</p>
<p>Datasetet vi ska använda finns i modulen <code>nycflights13</code> och kallas <code>flights</code>. Du kan få information om innehållet genom hjälpfunktionen</p>
<p><code>?flights</code></p>
<p>Det är en <em>dataframe</em> som innehåller information om samtliga 336 776 flighter som lyfte från NYC airport 2013. Du kan få en bild av hur tabellen är uppbyggd genom att skriva <em>tabellnamnet</em></p>
<div class="sourceCode" id="cb1298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1298-1"><a href="transformering-av-data-1.html#cb1298-1"></a>flights</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour minute time_hour          
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228  EWR    IAH        227     1400     5     15 2013-01-01 05:00:00
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211  LGA    IAH        227     1416     5     29 2013-01-01 05:00:00
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA  JFK    MIA        160     1089     5     40 2013-01-01 05:00:00
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB  JFK    BQN        183     1576     5     45 2013-01-01 05:00:00
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN  LGA    ATL        116      762     6      0 2013-01-01 06:00:00
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463  EWR    ORD        150      719     5     58 2013-01-01 05:00:00
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB  EWR    FLL        158     1065     6      0 2013-01-01 06:00:00
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS  LGA    IAD         53      229     6      0 2013-01-01 06:00:00
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB  JFK    MCO        140      944     6      0 2013-01-01 06:00:00
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA  LGA    ORD        138      733     6      0 2013-01-01 06:00:00
## # ... with 336,766 more rows</code></pre>
<p>Det som syns i output är en s.k. tibble, vilket är en modifierad tabell som visar de översta tabellraderna och de kolumner som får plats i förnstret. Du kan se hela tabellen genom kommandot</p>
<div class="sourceCode" id="cb1300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1300-1"><a href="transformering-av-data-1.html#cb1300-1"></a><span class="kw">View</span>(flights)</span></code></pre></div>
<p>Vilket öppnar hela tabellen i <em>editorn</em> uppe till vänster. <em>Tibbles</em> är en speciell form av datatabell som fungerar lite effektivare i tidyverse och vi återkommer till detaljerna senare.</p>
<p>Notera raden under variabelnamnen med de tre bokstäverna inom &lt;…&gt;. Dessa bokstäver beskriver data-typen för varje variabel:</p>
<pre><code>- Int = ental (integer)
- Dbl = reella tal (doubles)
- Chr = textsträng (character)
- Dttm = datum/tid (date and time)</code></pre>
<p>Det finns ytterligare tre data-typer som vi återkommer till:</p>
<pre><code>- Lgl = logisk (logical; TRUE/FALSE)
- Fctr = kategorisk (factor)
- Date = datum</code></pre>
</div>
<div id="dplyr-grunder-1" class="section level2" number="32.3">
<h2><span class="header-section-number">32.3</span> <code>dplyr</code> grunder</h2>
<p>Vi ska jobba med fem nyckelfunktioner i dplyr som klarar de flesta manipualtioner av rådata:</p>
<p>-<code>filter()</code> används för att välja ut poster baserat på variabelvärden
-<code>arrange()</code> används för att förändra ordningsföljden av posterna i en tabell
-<code>select()</code> används för att välja ut variabler
-<code>mutate()</code> används för att skapa nya variabler
-<code>summarise()</code> används för att summera eller aggregera poster</p>
<p>Dessa funktioner används ofta tillsammans med <code>group_by()</code> som är en funktion vilken grupperar data och utnyttjar någon eller flera av de fem funktionerna på varje grupp snarare än på hela datamängden.</p>
<p>Dessa funktioner fungerar på liknande sätt:</p>
<ol style="list-style-type: decimal">
<li>Det första argumentet är namnet på datamängden/tabellen</li>
<li>De följande argumenten beskriver vad som ska göras med tabellen, genom att inkludera variabelnamnen</li>
<li>Resultet är en ny datatabell</li>
</ol>
<p>Sammantaget gör dessa egenskaper det relativt lätt att länka samman flera enkla steg till en mer komplex kedja av manipulationer. Låt oss se hur det fungerar praktiskt.</p>
<div id="filtrera-raderposter-med-filter-1" class="section level3" number="32.3.1">
<h3><span class="header-section-number">32.3.1</span> Filtrera rader/poster med <code>filter()</code></h3>
<p><code>filter()</code> låter dig välja ut en delmängd av posterna baserat på variabelvärden. De första argumentet är namnet på datamängden/tabellen. De övriga argumenten är uttryck som preciserar vad filtret ska göra. Vi börjar med att välja ut samtliga flighter som skedde den 1 januari.</p>
<div class="sourceCode" id="cb1303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1303-1"><a href="transformering-av-data-1.html#cb1303-1"></a><span class="kw">filter</span>(flights, month <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, day <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 842 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour minute time_hour          
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228  EWR    IAH        227     1400     5     15 2013-01-01 05:00:00
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211  LGA    IAH        227     1416     5     29 2013-01-01 05:00:00
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA  JFK    MIA        160     1089     5     40 2013-01-01 05:00:00
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB  JFK    BQN        183     1576     5     45 2013-01-01 05:00:00
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN  LGA    ATL        116      762     6      0 2013-01-01 06:00:00
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463  EWR    ORD        150      719     5     58 2013-01-01 05:00:00
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB  EWR    FLL        158     1065     6      0 2013-01-01 06:00:00
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS  LGA    IAD         53      229     6      0 2013-01-01 06:00:00
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB  JFK    MCO        140      944     6      0 2013-01-01 06:00:00
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA  LGA    ORD        138      733     6      0 2013-01-01 06:00:00
## # ... with 832 more rows</code></pre>
<p>När koden körs filtreras flights och en ny tabell skapas. Dplyr förändrar aldrig ursprungsdata så om du vill spara resultatet för vidare bearbetning behöver du tillägna det ett namn, t.ex.:</p>
<div class="sourceCode" id="cb1305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1305-1"><a href="transformering-av-data-1.html#cb1305-1"></a>jan1 &lt;-<span class="st"> </span><span class="kw">filter</span>(flights, month <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, day <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre></div>
<div id="jämförelser-1" class="section level4" number="32.3.1.1">
<h4><span class="header-section-number">32.3.1.1</span> Jämförelser</h4>
<p>För att använda filtrering effektivt bör du känna till hur jämförelseoperatorerna används. Dessa är de etablerade:
<code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>!=</code> och <code>==</code>.
Det är lätt att man råkar använda <code>=</code> istället för <code>==</code> när man vill testa för exakt likhet. Pröva</p>
<p><code>filter(flights, month = 1)</code></p>
</div>
<div id="logiska-operatorer-1" class="section level4" number="32.3.1.2">
<h4><span class="header-section-number">32.3.1.2</span> Logiska operatorer</h4>
<p>Man kan förstås använda multipla argument för filtrering. Sedvanliga Booleanska operatorer fungerar, dvs</p>
<ul>
<li><code>&amp;</code> för “och”</li>
<li><code>|</code> för “eller”</li>
<li><code>!</code> för “icke”</li>
</ul>
<p>Se figuren nedan.</p>
<p><img src="transform-logical.png" /></p>
<p>Följande kod filtrerar fram samtliga fligheter som lyfte under november eller december:</p>
<div class="sourceCode" id="cb1306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1306-1"><a href="transformering-av-data-1.html#cb1306-1"></a><span class="kw">filter</span>(flights, month <span class="op">==</span><span class="st"> </span><span class="dv">11</span> <span class="op">|</span><span class="st"> </span>month <span class="op">==</span><span class="st"> </span><span class="dv">12</span>)</span></code></pre></div>
<pre><code>## # A tibble: 55,403 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour minute time_hour          
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1  2013    11     1        5           2359         6      352            345         7 B6         745 N568JB  JFK    PSE        205     1617    23     59 2013-11-01 23:00:00
##  2  2013    11     1       35           2250       105      123           2356        87 B6        1816 N353JB  JFK    SYR         36      209    22     50 2013-11-01 22:00:00
##  3  2013    11     1      455            500        -5      641            651       -10 US        1895 N192UW  EWR    CLT         88      529     5      0 2013-11-01 05:00:00
##  4  2013    11     1      539            545        -6      856            827        29 UA        1714 N38727  LGA    IAH        229     1416     5     45 2013-11-01 05:00:00
##  5  2013    11     1      542            545        -3      831            855       -24 AA        2243 N5CLAA  JFK    MIA        147     1089     5     45 2013-11-01 05:00:00
##  6  2013    11     1      549            600       -11      912            923       -11 UA         303 N595UA  JFK    SFO        359     2586     6      0 2013-11-01 06:00:00
##  7  2013    11     1      550            600       -10      705            659         6 US        2167 N748UW  LGA    DCA         57      214     6      0 2013-11-01 06:00:00
##  8  2013    11     1      554            600        -6      659            701        -2 US        2134 N742PS  LGA    BOS         40      184     6      0 2013-11-01 06:00:00
##  9  2013    11     1      554            600        -6      826            827        -1 DL         563 N912DE  LGA    ATL        126      762     6      0 2013-11-01 06:00:00
## 10  2013    11     1      554            600        -6      749            751        -2 DL         731 N315NB  LGA    DTW         93      502     6      0 2013-11-01 06:00:00
## # ... with 55,393 more rows</code></pre>
<p>Viktigt att ange kompletta argument! Det kan t.ex. vara förvirrande att <code>filter(flights, month == 11 | 12)</code>
kommer att ange samtliga flighter i januari, inte i november eller december. Det hänger samman med att uttrycket
11|12 är ett logiskt argument och utvärderas till sant, dvs TRUE. <em>I ett numeriskt sammanhang som här blir TRUE = 1 dvs tolkas som månaden 1, alltså januari!</em></p>
<p>Ett användbart snabbkommando för detta filtreringsproblem är <code>x %in% y</code>. detta söker ut samtliga poster där x är något av värdena i y. För att filtrera fram samtliga flighter under nov-dec kan vi då skriva:</p>
<div class="sourceCode" id="cb1308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1308-1"><a href="transformering-av-data-1.html#cb1308-1"></a>nov_dec &lt;-<span class="st"> </span><span class="kw">filter</span>(flights, month <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">11</span>, <span class="dv">12</span>))</span></code></pre></div>
<p>Närhelst du ska använda mer komplexa uttryck för att filtrera data bör du överväga att göra dem till explicita, ev temporära, variabler istället. Det gör det lättare att kontrollera eller felsöka kod. Återkommer strax till hur nya variabler skapas.</p>
</div>
<div id="missing-1" class="section level4" number="32.3.1.3">
<h4><span class="header-section-number">32.3.1.3</span> Missing</h4>
<p>Ett viktigt drag i R är hanteringen av missing values (NA - <em>not availables</em>) vilka representerar okända värden och är därför “smittsamma” - nästan varje behandling av data som innehåller NA kommer också att bli NA. Pröva:</p>
<div class="sourceCode" id="cb1309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1309-1"><a href="transformering-av-data-1.html#cb1309-1"></a><span class="ot">NA</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb1311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1311-1"><a href="transformering-av-data-1.html#cb1311-1"></a><span class="dv">10</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb1313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1313-1"><a href="transformering-av-data-1.html#cb1313-1"></a><span class="ot">NA</span> <span class="op">+</span><span class="st"> </span><span class="dv">10</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb1315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1315-1"><a href="transformering-av-data-1.html#cb1315-1"></a><span class="ot">NA</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Om du vill avgöra om ett värde är NA kan du använda <code>is.na()</code>:</p>
<div class="sourceCode" id="cb1317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1317-1"><a href="transformering-av-data-1.html#cb1317-1"></a>x &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb1317-2"><a href="transformering-av-data-1.html#cb1317-2"></a><span class="kw">is.na</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><code>filter()</code> inkluderar endast poster där villkoret är sant (TRUE). Det exkluderar således alla FALSE men också alla NA. Om man vill få med NA i filtreringen behöver de ingå explicit i villkoret:</p>
<div class="sourceCode" id="cb1319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1319-1"><a href="transformering-av-data-1.html#cb1319-1"></a>df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">3</span>))</span>
<span id="cb1319-2"><a href="transformering-av-data-1.html#cb1319-2"></a><span class="kw">filter</span>(df, x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       x
##   &lt;dbl&gt;
## 1     3</code></pre>
<div class="sourceCode" id="cb1321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1321-1"><a href="transformering-av-data-1.html#cb1321-1"></a><span class="kw">filter</span>(df, <span class="kw">is.na</span>(x) <span class="op">|</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##       x
##   &lt;dbl&gt;
## 1    NA
## 2     3</code></pre>
</div>
</div>
</div>
<div id="övningar-36" class="section level2" number="32.4">
<h2><span class="header-section-number">32.4</span> Övningar</h2>
<ol style="list-style-type: decimal">
<li>Hitta samtliga flighter
<ol style="list-style-type: lower-alpha">
<li>med en försenad ankomst mer än 2 timmar.</li>
<li>Lyfte med destination Houston</li>
<li>Avgick under juli, aug, september</li>
<li>Ankom med mer än 2 timmars försening men lyfte i tid</li>
</ol></li>
<li>Ett annat filter-verktyg är <code>between()</code>. Hur fungerar det? Kan man förenkla filtreringarna i punkt 1 med hjälp av <code>between()</code>?</li>
<li>Hur många flighter saknar data för <code>dep_time</code>?</li>
</ol>
</div>
<div id="arrangera-poster-med-arrange-1" class="section level2" number="32.5">
<h2><span class="header-section-number">32.5</span> Arrangera poster med <code>arrange()</code></h2>
<p><code>arrange()</code> fungerar på liknande sätt som <code>filter()</code> men istället för att filtrera poster så ändrar man deras inbördes ordning. Funktionen tar en data-frame och en eller flera kolumner för att ordna posterna. Om du använder mer än en kolumn kommer varje ytterligare kolumn att användas för att skapa brytpunkter i de följande kolumnerna. Pröva</p>
<div class="sourceCode" id="cb1323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1323-1"><a href="transformering-av-data-1.html#cb1323-1"></a><span class="kw">arrange</span>(flights, year, month, day)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour minute time_hour          
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228  EWR    IAH        227     1400     5     15 2013-01-01 05:00:00
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211  LGA    IAH        227     1416     5     29 2013-01-01 05:00:00
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA  JFK    MIA        160     1089     5     40 2013-01-01 05:00:00
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB  JFK    BQN        183     1576     5     45 2013-01-01 05:00:00
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN  LGA    ATL        116      762     6      0 2013-01-01 06:00:00
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463  EWR    ORD        150      719     5     58 2013-01-01 05:00:00
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB  EWR    FLL        158     1065     6      0 2013-01-01 06:00:00
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS  LGA    IAD         53      229     6      0 2013-01-01 06:00:00
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB  JFK    MCO        140      944     6      0 2013-01-01 06:00:00
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA  LGA    ORD        138      733     6      0 2013-01-01 06:00:00
## # ... with 336,766 more rows</code></pre>
<p>Man kan använda <code>desc()</code> för att sortera posterna i sjunkande ordning:</p>
<div class="sourceCode" id="cb1325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1325-1"><a href="transformering-av-data-1.html#cb1325-1"></a><span class="kw">arrange</span>(flights, <span class="kw">desc</span>(arr_delay))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour minute time_hour          
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1  2013     1     9      641            900      1301     1242           1530      1272 HA          51 N384HA  JFK    HNL        640     4983     9      0 2013-01-09 09:00:00
##  2  2013     6    15     1432           1935      1137     1607           2120      1127 MQ        3535 N504MQ  JFK    CMH         74      483    19     35 2013-06-15 19:00:00
##  3  2013     1    10     1121           1635      1126     1239           1810      1109 MQ        3695 N517MQ  EWR    ORD        111      719    16     35 2013-01-10 16:00:00
##  4  2013     9    20     1139           1845      1014     1457           2210      1007 AA         177 N338AA  JFK    SFO        354     2586    18     45 2013-09-20 18:00:00
##  5  2013     7    22      845           1600      1005     1044           1815       989 MQ        3075 N665MQ  JFK    CVG         96      589    16      0 2013-07-22 16:00:00
##  6  2013     4    10     1100           1900       960     1342           2211       931 DL        2391 N959DL  JFK    TPA        139     1005    19      0 2013-04-10 19:00:00
##  7  2013     3    17     2321            810       911      135           1020       915 DL        2119 N927DA  LGA    MSP        167     1020     8     10 2013-03-17 08:00:00
##  8  2013     7    22     2257            759       898      121           1026       895 DL        2047 N6716C  LGA    ATL        109      762     7     59 2013-07-22 07:00:00
##  9  2013    12     5      756           1700       896     1058           2020       878 AA         172 N5DMAA  EWR    MIA        149     1085    17      0 2013-12-05 17:00:00
## 10  2013     5     3     1133           2055       878     1250           2215       875 MQ        3744 N523MQ  EWR    ORD        112      719    20     55 2013-05-03 20:00:00
## # ... with 336,766 more rows</code></pre>
</div>
<div id="övningar-37" class="section level2" number="32.6">
<h2><span class="header-section-number">32.6</span> Övningar</h2>
<ol style="list-style-type: decimal">
<li>Hur kan du använda <code>arrange()</code> för att sortera alla missing values? (minns funktionen <code>is.na()</code> )</li>
<li>Sortera <code>flights</code> för att identifiera de mest försenade flighterna. Gör samma för de som lyfte tidigast.</li>
<li>Sortera <code>flights</code> för att identifiera de snabbaste flighterna.</li>
<li>Vilka flighter flög längst? Kortast?</li>
</ol>
</div>
<div id="välj-kolumner-med-select-1" class="section level2" number="32.7">
<h2><span class="header-section-number">32.7</span> Välj kolumner med <code>select()</code></h2>
<p>Många gånger får man rådata med mängder av variabler och behöver egentligen endast ett fåtal. Funktionen <code>select()</code> ger möjlighet att snabbt avgränsa datamängden till de variabler man vill använda, baserat på variabelnamnen.</p>
<p>Välj kolumner med hjälp av deras namn:</p>
<div class="sourceCode" id="cb1327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1327-1"><a href="transformering-av-data-1.html#cb1327-1"></a><span class="kw">select</span>(flights, year, month, day)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     year month   day
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1
##  2  2013     1     1
##  3  2013     1     1
##  4  2013     1     1
##  5  2013     1     1
##  6  2013     1     1
##  7  2013     1     1
##  8  2013     1     1
##  9  2013     1     1
## 10  2013     1     1
## # ... with 336,766 more rows</code></pre>
<p>Välj samtliga kolumner fr.o.m. year t.o.m. day:</p>
<div class="sourceCode" id="cb1329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1329-1"><a href="transformering-av-data-1.html#cb1329-1"></a><span class="kw">select</span>(flights, year<span class="op">:</span>day)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     year month   day
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1
##  2  2013     1     1
##  3  2013     1     1
##  4  2013     1     1
##  5  2013     1     1
##  6  2013     1     1
##  7  2013     1     1
##  8  2013     1     1
##  9  2013     1     1
## 10  2013     1     1
## # ... with 336,766 more rows</code></pre>
<p>Välj samtliga kolumner utom kolumnerna fr.o.m. year t.o.m. day:</p>
<div class="sourceCode" id="cb1331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1331-1"><a href="transformering-av-data-1.html#cb1331-1"></a><span class="kw">select</span>(flights, <span class="op">-</span>(year<span class="op">:</span>day))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 16
##    dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour minute time_hour          
##       &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1      517            515         2      830            819        11 UA        1545 N14228  EWR    IAH        227     1400     5     15 2013-01-01 05:00:00
##  2      533            529         4      850            830        20 UA        1714 N24211  LGA    IAH        227     1416     5     29 2013-01-01 05:00:00
##  3      542            540         2      923            850        33 AA        1141 N619AA  JFK    MIA        160     1089     5     40 2013-01-01 05:00:00
##  4      544            545        -1     1004           1022       -18 B6         725 N804JB  JFK    BQN        183     1576     5     45 2013-01-01 05:00:00
##  5      554            600        -6      812            837       -25 DL         461 N668DN  LGA    ATL        116      762     6      0 2013-01-01 06:00:00
##  6      554            558        -4      740            728        12 UA        1696 N39463  EWR    ORD        150      719     5     58 2013-01-01 05:00:00
##  7      555            600        -5      913            854        19 B6         507 N516JB  EWR    FLL        158     1065     6      0 2013-01-01 06:00:00
##  8      557            600        -3      709            723       -14 EV        5708 N829AS  LGA    IAD         53      229     6      0 2013-01-01 06:00:00
##  9      557            600        -3      838            846        -8 B6          79 N593JB  JFK    MCO        140      944     6      0 2013-01-01 06:00:00
## 10      558            600        -2      753            745         8 AA         301 N3ALAA  LGA    ORD        138      733     6      0 2013-01-01 06:00:00
## # ... with 336,766 more rows</code></pre>
<p>Det finns ett antal hjälpfunktioner som kan användas med <code>select()</code>:</p>
<ul>
<li><code>starts_with("abc")</code>: matchar namn som börjar med “abc”.</li>
<li><code>ends_with("xyz")</code>: matchar namn som slutar med “xyz”.</li>
<li><code>contains("ijk")</code>: Matchar namn som innehåller “ijk”.</li>
<li><code>matches("(.)\\1")</code>: väljer variabler som matchar ett <em>regular expression</em>. Detta exempel matchar varje variabel som innehåller upprepade tecken. Vi ska kika mer på <em>regular expressions</em> senare.</li>
<li><code>num_range("x", 1:3)</code> matchar x1, x2 and x3.</li>
</ul>
<p>Använd <code>?select</code> för mer information.</p>
<p><code>select()</code> kan användas för att ändra variabelnamn men är sällan en lämplig funktion för detta eftersom <code>select()</code> droppar alla de variabler som inte nämns explicit. Använd istället <code>rename()</code>:</p>
<div class="sourceCode" id="cb1333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1333-1"><a href="transformering-av-data-1.html#cb1333-1"></a><span class="kw">rename</span>(flights, <span class="dt">tail_num =</span> tailnum)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tail_num origin dest  air_time distance  hour minute time_hour          
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228   EWR    IAH        227     1400     5     15 2013-01-01 05:00:00
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211   LGA    IAH        227     1416     5     29 2013-01-01 05:00:00
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA   JFK    MIA        160     1089     5     40 2013-01-01 05:00:00
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB   JFK    BQN        183     1576     5     45 2013-01-01 05:00:00
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN   LGA    ATL        116      762     6      0 2013-01-01 06:00:00
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463   EWR    ORD        150      719     5     58 2013-01-01 05:00:00
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB   EWR    FLL        158     1065     6      0 2013-01-01 06:00:00
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS   LGA    IAD         53      229     6      0 2013-01-01 06:00:00
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB   JFK    MCO        140      944     6      0 2013-01-01 06:00:00
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA   LGA    ORD        138      733     6      0 2013-01-01 06:00:00
## # ... with 336,766 more rows</code></pre>
<p>Ett annat alternativ är att använda hjälpfunktionen <code>everything()</code>. Detta kan vara praktiskt då du vill flytta vissa variabler t.ex. till början av datamängden:</p>
<div class="sourceCode" id="cb1335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1335-1"><a href="transformering-av-data-1.html#cb1335-1"></a><span class="kw">select</span>(flights, time_hour, air_time, <span class="kw">everything</span>())</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##    time_hour           air_time  year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  distance  hour minute
##    &lt;dttm&gt;                 &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 2013-01-01 05:00:00      227  2013     1     1      517            515         2      830            819        11 UA        1545 N14228  EWR    IAH       1400     5     15
##  2 2013-01-01 05:00:00      227  2013     1     1      533            529         4      850            830        20 UA        1714 N24211  LGA    IAH       1416     5     29
##  3 2013-01-01 05:00:00      160  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA  JFK    MIA       1089     5     40
##  4 2013-01-01 05:00:00      183  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB  JFK    BQN       1576     5     45
##  5 2013-01-01 06:00:00      116  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN  LGA    ATL        762     6      0
##  6 2013-01-01 05:00:00      150  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463  EWR    ORD        719     5     58
##  7 2013-01-01 06:00:00      158  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB  EWR    FLL       1065     6      0
##  8 2013-01-01 06:00:00       53  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS  LGA    IAD        229     6      0
##  9 2013-01-01 06:00:00      140  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB  JFK    MCO        944     6      0
## 10 2013-01-01 06:00:00      138  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA  LGA    ORD        733     6      0
## # ... with 336,766 more rows</code></pre>
</div>
<div id="övningar-38" class="section level2" number="32.8">
<h2><span class="header-section-number">32.8</span> Övningar</h2>
<ol style="list-style-type: decimal">
<li>Vad händer om du använder ett variabelnamn flera gånger i <code>select()</code>?</li>
<li>Vad åstadkommer hjälpfunktionen <code>one_of()</code>? Varför kan den vara till nytta tillsammans med nedanstående vektor?</li>
</ol>
<div class="sourceCode" id="cb1337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1337-1"><a href="transformering-av-data-1.html#cb1337-1"></a>vars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;dep_delay&quot;</span>, <span class="st">&quot;arr_delay&quot;</span>)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Blir du förvånad över resultatet av följande kod? Hur kan hjälpfunktionerna till <code>select()</code> hantera dessa “by default”? Hur kan du ändra “default”?</li>
</ol>
<div class="sourceCode" id="cb1338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1338-1"><a href="transformering-av-data-1.html#cb1338-1"></a>    <span class="kw">select</span>(flights, <span class="kw">contains</span>(<span class="st">&quot;TIME&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 6
##    dep_time sched_dep_time arr_time sched_arr_time air_time time_hour          
##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt; &lt;dttm&gt;             
##  1      517            515      830            819      227 2013-01-01 05:00:00
##  2      533            529      850            830      227 2013-01-01 05:00:00
##  3      542            540      923            850      160 2013-01-01 05:00:00
##  4      544            545     1004           1022      183 2013-01-01 05:00:00
##  5      554            600      812            837      116 2013-01-01 06:00:00
##  6      554            558      740            728      150 2013-01-01 05:00:00
##  7      555            600      913            854      158 2013-01-01 06:00:00
##  8      557            600      709            723       53 2013-01-01 06:00:00
##  9      557            600      838            846      140 2013-01-01 06:00:00
## 10      558            600      753            745      138 2013-01-01 06:00:00
## # ... with 336,766 more rows</code></pre>
</div>
<div id="lägg-till-flera-variabler-med-hjälp-av-mutate-1" class="section level2" number="32.9">
<h2><span class="header-section-number">32.9</span> Lägg till flera variabler med hjälp av <code>mutate()</code></h2>
<p>Förutom att välja ut variabler behöver man ofta lägga till nya variabler vilka är funktioner av befintliga variabler. Det är vad funktionen <code>mutate()</code> gör.</p>
<p><code>mutate()</code> lägger alltid till de nya variablerna sist i datamängden. Vi börjar med att reducera antalet variabler så att kolumnerena blir mer lättöverskådliga:</p>
<div class="sourceCode" id="cb1340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1340-1"><a href="transformering-av-data-1.html#cb1340-1"></a>flights_sml &lt;-<span class="st"> </span><span class="kw">select</span>(flights, </span>
<span id="cb1340-2"><a href="transformering-av-data-1.html#cb1340-2"></a>  year<span class="op">:</span>day, </span>
<span id="cb1340-3"><a href="transformering-av-data-1.html#cb1340-3"></a>  <span class="kw">ends_with</span>(<span class="st">&quot;delay&quot;</span>), </span>
<span id="cb1340-4"><a href="transformering-av-data-1.html#cb1340-4"></a>  distance, </span>
<span id="cb1340-5"><a href="transformering-av-data-1.html#cb1340-5"></a>  air_time</span>
<span id="cb1340-6"><a href="transformering-av-data-1.html#cb1340-6"></a>)</span>
<span id="cb1340-7"><a href="transformering-av-data-1.html#cb1340-7"></a><span class="kw">mutate</span>(flights_sml,</span>
<span id="cb1340-8"><a href="transformering-av-data-1.html#cb1340-8"></a>  <span class="dt">gain =</span> arr_delay <span class="op">-</span><span class="st"> </span>dep_delay,</span>
<span id="cb1340-9"><a href="transformering-av-data-1.html#cb1340-9"></a>  <span class="dt">speed =</span> distance <span class="op">/</span><span class="st"> </span>air_time <span class="op">*</span><span class="st"> </span><span class="dv">60</span></span>
<span id="cb1340-10"><a href="transformering-av-data-1.html#cb1340-10"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 9
##     year month   day dep_delay arr_delay distance air_time  gain speed
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2013     1     1         2        11     1400      227     9  370.
##  2  2013     1     1         4        20     1416      227    16  374.
##  3  2013     1     1         2        33     1089      160    31  408.
##  4  2013     1     1        -1       -18     1576      183   -17  517.
##  5  2013     1     1        -6       -25      762      116   -19  394.
##  6  2013     1     1        -4        12      719      150    16  288.
##  7  2013     1     1        -5        19     1065      158    24  404.
##  8  2013     1     1        -3       -14      229       53   -11  259.
##  9  2013     1     1        -3        -8      944      140    -5  405.
## 10  2013     1     1        -2         8      733      138    10  319.
## # ... with 336,766 more rows</code></pre>
<p>Notera att du kan referera till de nya kolumnerna:</p>
<div class="sourceCode" id="cb1342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1342-1"><a href="transformering-av-data-1.html#cb1342-1"></a><span class="kw">mutate</span>(flights_sml,</span>
<span id="cb1342-2"><a href="transformering-av-data-1.html#cb1342-2"></a>  <span class="dt">gain =</span> arr_delay <span class="op">-</span><span class="st"> </span>dep_delay,</span>
<span id="cb1342-3"><a href="transformering-av-data-1.html#cb1342-3"></a>  <span class="dt">hours =</span> air_time <span class="op">/</span><span class="st"> </span><span class="dv">60</span>,</span>
<span id="cb1342-4"><a href="transformering-av-data-1.html#cb1342-4"></a>  <span class="dt">gain_per_hour =</span> gain <span class="op">/</span><span class="st"> </span>hours</span>
<span id="cb1342-5"><a href="transformering-av-data-1.html#cb1342-5"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 10
##     year month   day dep_delay arr_delay distance air_time  gain hours gain_per_hour
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;
##  1  2013     1     1         2        11     1400      227     9 3.78           2.38
##  2  2013     1     1         4        20     1416      227    16 3.78           4.23
##  3  2013     1     1         2        33     1089      160    31 2.67          11.6 
##  4  2013     1     1        -1       -18     1576      183   -17 3.05          -5.57
##  5  2013     1     1        -6       -25      762      116   -19 1.93          -9.83
##  6  2013     1     1        -4        12      719      150    16 2.5            6.4 
##  7  2013     1     1        -5        19     1065      158    24 2.63           9.11
##  8  2013     1     1        -3       -14      229       53   -11 0.883        -12.5 
##  9  2013     1     1        -3        -8      944      140    -5 2.33          -2.14
## 10  2013     1     1        -2         8      733      138    10 2.3            4.35
## # ... with 336,766 more rows</code></pre>
<p>Om du vill endast behålla de nya variablerna kan du använda <code>transmute()</code>:</p>
<div class="sourceCode" id="cb1344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1344-1"><a href="transformering-av-data-1.html#cb1344-1"></a><span class="kw">transmute</span>(flights,</span>
<span id="cb1344-2"><a href="transformering-av-data-1.html#cb1344-2"></a>  <span class="dt">gain =</span> arr_delay <span class="op">-</span><span class="st"> </span>dep_delay,</span>
<span id="cb1344-3"><a href="transformering-av-data-1.html#cb1344-3"></a>  <span class="dt">hours =</span> air_time <span class="op">/</span><span class="st"> </span><span class="dv">60</span>,</span>
<span id="cb1344-4"><a href="transformering-av-data-1.html#cb1344-4"></a>  <span class="dt">gain_per_hour =</span> gain <span class="op">/</span><span class="st"> </span>hours</span>
<span id="cb1344-5"><a href="transformering-av-data-1.html#cb1344-5"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     gain hours gain_per_hour
##    &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;
##  1     9 3.78           2.38
##  2    16 3.78           4.23
##  3    31 2.67          11.6 
##  4   -17 3.05          -5.57
##  5   -19 1.93          -9.83
##  6    16 2.5            6.4 
##  7    24 2.63           9.11
##  8   -11 0.883        -12.5 
##  9    -5 2.33          -2.14
## 10    10 2.3            4.35
## # ... with 336,766 more rows</code></pre>
<div id="funktioner-och-operatorer-att-användas-med-mutate-1" class="section level3" number="32.9.1">
<h3><span class="header-section-number">32.9.1</span> Funktioner och operatorer att användas med <code>mutate()</code></h3>
<p>Den grundläggande egenskapen hos denna funktion är att den måste vektoriseras, dvs dess argument måste vara en vektor av värden (input) och den resulterar i en vektor av nya värden (output), lika många som input.</p>
<p>Det finns alldeles för många funktioner som man kan använda tillsammans med <code>mutate()</code> för att kunna lista dem här. Men de nedanstående är en uppsättning som är de vanligast förekommande:</p>
<ul>
<li>Aritmetiska operatorer: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code>. Dessa vektoriseras genom “recycling rules”. Om en parameter är kortare än en annan kommer den att automatiskt förlängas till samma längd som den andra vektorn. Detta är mycket användbart då den ena parametern består av ett fixerat värde, t.ex. <code>air_time/60</code> eller <code>hours * 60 + minute</code>.</li>
<li>Aritmetiska operatorer är också användbara tillsammans med aggregeringsfunktioner som vi ska kika på senare. Till exempel beräknar <code>x / sum(x)</code> andelen av en total; <code>y - mean(y)</code> beräknar avvikelsen från medelvärdet.</li>
<li>Modulär aritmetik: <code>%/%</code> (heltalsdivision) och <code>%%</code> (rest). Detta är en användbar funktion för att dekomponera ett heltal. Till exempel:</li>
</ul>
<div class="sourceCode" id="cb1346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1346-1"><a href="transformering-av-data-1.html#cb1346-1"></a><span class="kw">transmute</span>(flights,</span>
<span id="cb1346-2"><a href="transformering-av-data-1.html#cb1346-2"></a>  dep_time,</span>
<span id="cb1346-3"><a href="transformering-av-data-1.html#cb1346-3"></a>  <span class="dt">hour =</span> dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>,</span>
<span id="cb1346-4"><a href="transformering-av-data-1.html#cb1346-4"></a>  <span class="dt">minute =</span> dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb1346-5"><a href="transformering-av-data-1.html#cb1346-5"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##    dep_time  hour minute
##       &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1      517     5     17
##  2      533     5     33
##  3      542     5     42
##  4      544     5     44
##  5      554     5     54
##  6      554     5     54
##  7      555     5     55
##  8      557     5     57
##  9      557     5     57
## 10      558     5     58
## # ... with 336,766 more rows</code></pre>
<ul>
<li>Logaritmer: <code>log()</code>, <code>log2()</code>, <code>log10()</code>.</li>
<li>Offsets: <code>lead()</code> and <code>lag()</code> gör det möjligt att referera till värden tidigare eller senare i vektorn. Till exempel beräkna löpande skillnader <code>( x - lag(x))</code> eller att identifiera poster där värden förändras (<code>x != lag(x)</code>).</li>
</ul>
<div class="sourceCode" id="cb1348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1348-1"><a href="transformering-av-data-1.html#cb1348-1"></a>(x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb1350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1350-1"><a href="transformering-av-data-1.html#cb1350-1"></a><span class="kw">lag</span>(x)</span></code></pre></div>
<pre><code>##  [1] NA  1  2  3  4  5  6  7  8  9</code></pre>
<div class="sourceCode" id="cb1352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1352-1"><a href="transformering-av-data-1.html#cb1352-1"></a><span class="kw">lead</span>(x)</span></code></pre></div>
<pre><code>##  [1]  2  3  4  5  6  7  8  9 10 NA</code></pre>
<ul>
<li>Kumulativa “aggregat”: R inehåller funktioner för löpande summor, produkter, minimum, maximum: <code>cumsum()</code>, <code>cumprod()</code>, <code>cummin()</code>, <code>cummax()</code>; och <code>dplyr</code> innehåller <code>cummean()</code> för kumulativa medelvärden.</li>
</ul>
<div class="sourceCode" id="cb1354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1354-1"><a href="transformering-av-data-1.html#cb1354-1"></a>x</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb1356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1356-1"><a href="transformering-av-data-1.html#cb1356-1"></a><span class="kw">cumsum</span>(x)</span></code></pre></div>
<pre><code>##  [1]  1  3  6 10 15 21 28 36 45 55</code></pre>
<div class="sourceCode" id="cb1358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1358-1"><a href="transformering-av-data-1.html#cb1358-1"></a><span class="kw">cummean</span>(x)</span></code></pre></div>
<pre><code>##  [1] 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5</code></pre>
<ul>
<li><p>Logiska jämförelser (se ovan): <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>!=</code> . Tips: om du skapar en komplex sekvens av logiska operatorer är det ofta en god idé att lagra delvärden som nya variabler - det gör det lättare att kolla så att varje steg fungerar som det ska.</p></li>
<li><p>Ranking: det finns ett antal ranking-funktioner av vilka <code>min_rank()</code> är mest använd. Den gör den vanligaste typen av rankning, dvs första, andra, tredje osv. Default är att tilldela det lägsta värdet den lägsta rankningen. Man kan använda <code>desc(x)</code> för att tilldela det största värdet den lägsta rankningen:</p></li>
</ul>
<div class="sourceCode" id="cb1360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1360-1"><a href="transformering-av-data-1.html#cb1360-1"></a>y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb1360-2"><a href="transformering-av-data-1.html#cb1360-2"></a></span>
<span id="cb1360-3"><a href="transformering-av-data-1.html#cb1360-3"></a><span class="kw">min_rank</span>(y)</span></code></pre></div>
<pre><code>## [1]  1  2  2 NA  4  5</code></pre>
<div class="sourceCode" id="cb1362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1362-1"><a href="transformering-av-data-1.html#cb1362-1"></a><span class="kw">min_rank</span>(<span class="kw">desc</span>(y))</span></code></pre></div>
<pre><code>## [1]  5  3  3 NA  2  1</code></pre>
<p>Om <code>min_rank()</code> inte är det du söker, pröva <code>row_number()</code>, <code>dense_rank()</code>, <code>percent_rank()</code>, <code>cume_dist()</code>, <code>ntile()</code>. Se respektive hjälpsida för mer info.</p>
<div class="sourceCode" id="cb1364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1364-1"><a href="transformering-av-data-1.html#cb1364-1"></a><span class="kw">row_number</span>(y)</span></code></pre></div>
<pre><code>## [1]  1  2  3 NA  4  5</code></pre>
<div class="sourceCode" id="cb1366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1366-1"><a href="transformering-av-data-1.html#cb1366-1"></a><span class="kw">dense_rank</span>(y)</span></code></pre></div>
<pre><code>## [1]  1  2  2 NA  3  4</code></pre>
<div class="sourceCode" id="cb1368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1368-1"><a href="transformering-av-data-1.html#cb1368-1"></a><span class="kw">percent_rank</span>(y)</span></code></pre></div>
<pre><code>## [1] 0.00 0.25 0.25   NA 0.75 1.00</code></pre>
<div class="sourceCode" id="cb1370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1370-1"><a href="transformering-av-data-1.html#cb1370-1"></a><span class="kw">cume_dist</span>(y)</span></code></pre></div>
<pre><code>## [1] 0.2 0.6 0.6  NA 0.8 1.0</code></pre>
</div>
</div>
<div id="övningar-39" class="section level2" number="32.10">
<h2><span class="header-section-number">32.10</span> Övningar</h2>
<ol style="list-style-type: decimal">
<li><code>dep_time</code> och <code>sched_dep_time</code> kan vara mer begripliga att se på men svårare att räkna med eftersom de inte innehåller kontinuerliga värden. Konvertera dem till mer användbara värden som antal minuter efter midnatt.</li>
<li>Jämför <code>air_time</code> med <code>arr_time - dep_time</code>. Vad förväntar du dig att se? Vad ser du? Vad behöver göras för att se det du förväntade dig?</li>
<li>Identifiera de 10 mest försenade flighterna genom att använda en rankningsfunktion.</li>
<li>Vad returneras av <code>1:3 + 1:10</code> ? Varför?</li>
<li>Vilka trigonometriska funktioner finns i R?</li>
</ol>
</div>
<div id="grupperade-summeringar-med-summarise-1" class="section level2" number="32.11">
<h2><span class="header-section-number">32.11</span> Grupperade summeringar med <code>summarise()</code></h2>
<p>Den sista nyckelfunktionen är <code>summarise()</code>. Den slår samman en datamängd till en enda rad. Pröva:</p>
<div class="sourceCode" id="cb1372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1372-1"><a href="transformering-av-data-1.html#cb1372-1"></a><span class="kw">summarise</span>(flights, <span class="dt">delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   delay
##   &lt;dbl&gt;
## 1  12.6</code></pre>
<p>(Vi återkommer till na.rm = TRUE alldeles strax.)</p>
<p><code>summarise()</code> är inte särskilt användbart såvida vi inte samtidigt använder <code>group_by()</code>. Denna funktion förändrar “the unit of analysis” från hela datamängden till grupper av data. När du använder <code>dplyr</code>-funktionerna på en grupperad datamängd kommer funktionerna att automatiskt tillämpas på varje grupp. Så när vi till exempel tillämpar exakt samma kod som ovan på data som är grupperade per dag så får vi den genomsnittliga förseningen per dag. Pröva:</p>
<div class="sourceCode" id="cb1374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1374-1"><a href="transformering-av-data-1.html#cb1374-1"></a>by_day &lt;-<span class="st"> </span><span class="kw">group_by</span>(flights, year, month, day)</span>
<span id="cb1374-2"><a href="transformering-av-data-1.html#cb1374-2"></a><span class="kw">summarise</span>(by_day, <span class="dt">delay =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1 11.5 
##  2  2013     1     2 13.9 
##  3  2013     1     3 11.0 
##  4  2013     1     4  8.95
##  5  2013     1     5  5.73
##  6  2013     1     6  7.15
##  7  2013     1     7  5.42
##  8  2013     1     8  2.55
##  9  2013     1     9  2.28
## 10  2013     1    10  2.84
## # ... with 355 more rows</code></pre>
<p><code>group_by()</code> och <code>summarise()</code> är tillsammans de verktyg du kommer att använda mest då du arbetar med <code>dplyr</code>, nämligen grupperade summeringar. Men innan vi går vidare med detta behöver vi kika på “the pipe” (hur översätter man detta?).</p>
</div>
<div id="kombinera-multipla-operationer-med-the-pipe-1" class="section level2" number="32.12">
<h2><span class="header-section-number">32.12</span> Kombinera multipla operationer med the pipe</h2>
<p>Antag att vi vill undersöka relationen mellan avståndet och den genomsnittliga förseningen för varje destination. Vi kan skriva följande kod:</p>
<div class="sourceCode" id="cb1377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1377-1"><a href="transformering-av-data-1.html#cb1377-1"></a>by_dest &lt;-<span class="st"> </span><span class="kw">group_by</span>(flights, dest)</span>
<span id="cb1377-2"><a href="transformering-av-data-1.html#cb1377-2"></a></span>
<span id="cb1377-3"><a href="transformering-av-data-1.html#cb1377-3"></a>delay &lt;-<span class="st"> </span><span class="kw">summarise</span>(by_dest,</span>
<span id="cb1377-4"><a href="transformering-av-data-1.html#cb1377-4"></a>  <span class="dt">count =</span> <span class="kw">n</span>(),</span>
<span id="cb1377-5"><a href="transformering-av-data-1.html#cb1377-5"></a>  <span class="dt">dist =</span> <span class="kw">mean</span>(distance, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb1377-6"><a href="transformering-av-data-1.html#cb1377-6"></a>  <span class="dt">delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1377-7"><a href="transformering-av-data-1.html#cb1377-7"></a>)</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb1379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1379-1"><a href="transformering-av-data-1.html#cb1379-1"></a>delay &lt;-<span class="st"> </span><span class="kw">filter</span>(delay, count <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, dest <span class="op">!=</span><span class="st"> &quot;HNL&quot;</span>)</span></code></pre></div>
<p>Det verkar som förseningen ökar upp till ett avstånd runt 750 miles och sedan minskar. Kanske är det så att på en längre flygning finns större förutsättningar att hämta in en försening? Vi kan visualisera data genom:</p>
<div class="sourceCode" id="cb1380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1380-1"><a href="transformering-av-data-1.html#cb1380-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> delay, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> dist, <span class="dt">y =</span> delay)) <span class="op">+</span></span>
<span id="cb1380-2"><a href="transformering-av-data-1.html#cb1380-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">size =</span> count), <span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>) <span class="op">+</span></span>
<span id="cb1380-3"><a href="transformering-av-data-1.html#cb1380-3"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-622-1.png" width="70%" /></p>
<p>Dessa data förbereds i tre steg:
1. Gruppera flighter per destination.
2. Summera avstånd, genomsnittlig försening och antal flighter.
3. Filtrera bort brus och flighter till Honolulu, som ligger mer än dubbelt så långt bort som den näst längst bort.</p>
<p>Denna kod är lite omständlig att skriva eftersom vi behöver tilldela varje intermediär datamängd ett namn fastän vi inte är intresserade av själva datamängden i sig. Istället kan man skriva om koden med hjälp av “the pipe”, %&gt;% (snabbtangenter Ctrl+Shift+m):</p>
<div class="sourceCode" id="cb1382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1382-1"><a href="transformering-av-data-1.html#cb1382-1"></a>delays &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1382-2"><a href="transformering-av-data-1.html#cb1382-2"></a><span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1382-3"><a href="transformering-av-data-1.html#cb1382-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1382-4"><a href="transformering-av-data-1.html#cb1382-4"></a>    <span class="dt">count =</span> <span class="kw">n</span>(),</span>
<span id="cb1382-5"><a href="transformering-av-data-1.html#cb1382-5"></a>    <span class="dt">dist =</span> <span class="kw">mean</span>(distance, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb1382-6"><a href="transformering-av-data-1.html#cb1382-6"></a>    <span class="dt">delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1382-7"><a href="transformering-av-data-1.html#cb1382-7"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1382-8"><a href="transformering-av-data-1.html#cb1382-8"></a><span class="st">  </span><span class="kw">filter</span>(count <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, dest <span class="op">!=</span><span class="st"> &quot;HNL&quot;</span>)</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<p>Detta fokuserar transformeringarna istället för det som transformeras, vilket gör koden lättare att läsa. Du kan läsa ut koden som en serie av länkade uppmaningar: “gruppera, sedan summera, sedan filtrera”. Man kan alltså använda “the pipe” för att skriva om multipla operationer så att de kan läsas från vänster till höger, uppifrån och ned.</p>
<p>Detta har blivit en ganska central del i det modernare R och rekommenderas starkt. MEN, det finns svagheter. Ett viktigt undantag är <code>ggplot2</code> som skrevs innan “the pipe”-grammatiken utvecklades. Nästa generation av <code>ggplot2</code> är dock under stark utveckling. Den modulen kallas <code>ggvis</code> (i skrivande stund version 0.4) och förutom att integrera “the pipe” är den tänkt att också integrera interaktiva diagram. Läs mer på Rstudios hemsida <a href="http://ggvis.rstudio.com" class="uri">http://ggvis.rstudio.com</a> .</p>
</div>
<div id="missing-values-4" class="section level2" number="32.13">
<h2><span class="header-section-number">32.13</span> Missing values</h2>
<p>Vi använde tidigare argumentet <code>na.rm()</code>.Vad händer om vi inte gör det? Pröva:</p>
<div class="sourceCode" id="cb1384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1384-1"><a href="transformering-av-data-1.html#cb1384-1"></a>flights <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1384-2"><a href="transformering-av-data-1.html#cb1384-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1384-3"><a href="transformering-av-data-1.html#cb1384-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(dep_delay))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day  mean
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1    NA
##  2  2013     1     2    NA
##  3  2013     1     3    NA
##  4  2013     1     4    NA
##  5  2013     1     5    NA
##  6  2013     1     6    NA
##  7  2013     1     7    NA
##  8  2013     1     8    NA
##  9  2013     1     9    NA
## 10  2013     1    10    NA
## # ... with 355 more rows</code></pre>
<p>En massa värden blir missing (<code>NA</code>)! Det blir så därför att de olika summeringsfunktionerna lyder under “the rule of missing values”: om det finns ett eller fler <code>NA</code> i input kommer output att vara ett <code>NA.</code> Argumentet <code>na.rm()</code> flyttar bort alla missing values (<code>NA</code>) innan beräkningen görs:</p>
<div class="sourceCode" id="cb1387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1387-1"><a href="transformering-av-data-1.html#cb1387-1"></a>flights <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1387-2"><a href="transformering-av-data-1.html#cb1387-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1387-3"><a href="transformering-av-data-1.html#cb1387-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(dep_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day  mean
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1 11.5 
##  2  2013     1     2 13.9 
##  3  2013     1     3 11.0 
##  4  2013     1     4  8.95
##  5  2013     1     5  5.73
##  6  2013     1     6  7.15
##  7  2013     1     7  5.42
##  8  2013     1     8  2.55
##  9  2013     1     9  2.28
## 10  2013     1    10  2.84
## # ... with 355 more rows</code></pre>
<p>I detta fall där NA representerade inställda flyg, kan vi även genomföra en summering genom att först ta bort samtliga inställda flyg (= NA). Vi skapar ett nytt dataset för kommande exempel:</p>
<div class="sourceCode" id="cb1390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1390-1"><a href="transformering-av-data-1.html#cb1390-1"></a>not_cancelled &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1390-2"><a href="transformering-av-data-1.html#cb1390-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(dep_delay), <span class="op">!</span><span class="kw">is.na</span>(arr_delay))</span>
<span id="cb1390-3"><a href="transformering-av-data-1.html#cb1390-3"></a></span>
<span id="cb1390-4"><a href="transformering-av-data-1.html#cb1390-4"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1390-5"><a href="transformering-av-data-1.html#cb1390-5"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1390-6"><a href="transformering-av-data-1.html#cb1390-6"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(dep_delay))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day  mean
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1 11.4 
##  2  2013     1     2 13.7 
##  3  2013     1     3 10.9 
##  4  2013     1     4  8.97
##  5  2013     1     5  5.73
##  6  2013     1     6  7.15
##  7  2013     1     7  5.42
##  8  2013     1     8  2.56
##  9  2013     1     9  2.30
## 10  2013     1    10  2.84
## # ... with 355 more rows</code></pre>
</div>
<div id="antal-counts-1" class="section level2" number="32.14">
<h2><span class="header-section-number">32.14</span> Antal (counts)</h2>
<p>Då man gör en summering är det ofta en bra idé att inkludera antalet observationer (vilket görs med funktionen <code>n()</code>) liksom antalet missing values (<code>sum(!is.na(x))</code>). På det sättet är det lätt att kolla så att man t.ex. inte drar slutsatser på flygplanen (identifierade genom deras tail numbers) med längst genomsnittlig försening:</p>
<div class="sourceCode" id="cb1393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1393-1"><a href="transformering-av-data-1.html#cb1393-1"></a>delays &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1393-2"><a href="transformering-av-data-1.html#cb1393-2"></a><span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1393-3"><a href="transformering-av-data-1.html#cb1393-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1393-4"><a href="transformering-av-data-1.html#cb1393-4"></a>    <span class="dt">delay =</span> <span class="kw">mean</span>(arr_delay)</span>
<span id="cb1393-5"><a href="transformering-av-data-1.html#cb1393-5"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb1395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1395-1"><a href="transformering-av-data-1.html#cb1395-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> delays, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> delay)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1395-2"><a href="transformering-av-data-1.html#cb1395-2"></a><span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-627-1.png" width="70%" /></p>
<p>OK, det finns alltså plan med en genomsnittlig försening med mer än 5 timmar! Nja, det är lite mer komplicerat än så. Vi får mer information genom att att göra en scatterplot över antalet flighter vs. genomsnittlig försening:</p>
<div class="sourceCode" id="cb1396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1396-1"><a href="transformering-av-data-1.html#cb1396-1"></a>delays &lt;-<span class="st"> </span>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1396-2"><a href="transformering-av-data-1.html#cb1396-2"></a><span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1396-3"><a href="transformering-av-data-1.html#cb1396-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1396-4"><a href="transformering-av-data-1.html#cb1396-4"></a>    <span class="dt">delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb1396-5"><a href="transformering-av-data-1.html#cb1396-5"></a>    <span class="dt">n =</span> <span class="kw">n</span>()</span>
<span id="cb1396-6"><a href="transformering-av-data-1.html#cb1396-6"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb1398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1398-1"><a href="transformering-av-data-1.html#cb1398-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> delays, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> n, <span class="dt">y =</span> delay)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1398-2"><a href="transformering-av-data-1.html#cb1398-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">10</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-628-1.png" width="70%" /></p>
<p>Inte helt överraskande är det mycket större variation i genomsnittlig försening då flighterna är få. Scatterplotten är karakteristisk: då man plottar genomsnittsvärden (eller andra summeringar) mot gruppstorlek kommer variationen att minska då urvalsstorleken ökar. I dessa fall är det ofta användbart att filtrera ut grupperna med minst antal observationer vilket gör att man tydligare ser ev mönster och mindre av extrema värden. Detta åstadkommer vi med följande kod. Notera hur <code>ggplot2</code>-kod integreras i <code>dplyr</code> flödet. Visserligen lite retfullt att byta från <code>%&gt;%</code> till <code>+</code> men det funkar:</p>
<div class="sourceCode" id="cb1399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1399-1"><a href="transformering-av-data-1.html#cb1399-1"></a>delays <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1399-2"><a href="transformering-av-data-1.html#cb1399-2"></a><span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">25</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1399-3"><a href="transformering-av-data-1.html#cb1399-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> n, <span class="dt">y =</span> delay)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1399-4"><a href="transformering-av-data-1.html#cb1399-4"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">10</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-629-1.png" width="70%" /></p>
<p>Tips: ett användbart kortkommando är <code>Ctrl+Shift+P</code>. Då återanvänds det senaste kodavsnittet (i Rstudio-språk “the chunk”) och sänds från editorn till konsolen. Detta är smidigt när man t.ex. prövar olika värden på <code>n</code> i exemplet. Du skickar hela kodavsnittet med hjälp av <code>Ctrl+Enter</code>, sedan modifierar du värdet på <code>n</code> och återanvänder det genom <code>Ctrl+Shift+P</code>.</p>
</div>
<div id="användbara-summeringsfunktioner-1" class="section level2" number="32.15">
<h2><span class="header-section-number">32.15</span> Användbara summeringsfunktioner</h2>
<p>Man kan komma långt enbart med medelvärden, antal och summa men R innehåller många fler summeringsfunktioner:
- <em>Medianvärdet</em> beräknas med <code>median(x)</code> . Det är ibland smidigt att använda tillsammans med verktyg för att välja ut delar av ett dataset, <em>subsetting</em> (kommer senare). Pröva:</p>
<div class="sourceCode" id="cb1400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1400-1"><a href="transformering-av-data-1.html#cb1400-1"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1400-2"><a href="transformering-av-data-1.html#cb1400-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1400-3"><a href="transformering-av-data-1.html#cb1400-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1400-4"><a href="transformering-av-data-1.html#cb1400-4"></a>    <span class="dt">avg_delay1 =</span> <span class="kw">mean</span>(arr_delay),</span>
<span id="cb1400-5"><a href="transformering-av-data-1.html#cb1400-5"></a>    <span class="dt">avg_delay2 =</span> <span class="kw">mean</span>(arr_delay[arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>]) <span class="co"># the average positive delay</span></span>
<span id="cb1400-6"><a href="transformering-av-data-1.html#cb1400-6"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 5
## # Groups:   year, month [12]
##     year month   day avg_delay1 avg_delay2
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;      &lt;dbl&gt;
##  1  2013     1     1     12.7         32.5
##  2  2013     1     2     12.7         32.0
##  3  2013     1     3      5.73        27.7
##  4  2013     1     4     -1.93        28.3
##  5  2013     1     5     -1.53        22.6
##  6  2013     1     6      4.24        24.4
##  7  2013     1     7     -4.95        27.8
##  8  2013     1     8     -3.23        20.8
##  9  2013     1     9     -0.264       25.6
## 10  2013     1    10     -5.90        27.3
## # ... with 355 more rows</code></pre>
<ul>
<li><p><em>Spridningsmått</em>: <code>sd(x)</code>, <code>IQR(x)</code>, <code>mad(x)</code>, för <em>standardavvikelsen</em>, <em>interkvartil-avståndet</em> (interquartile range) resp <em>median absolute deviation</em>.</p></li>
<li><p><em>Ranking-mått</em>: <code>min(x)</code>, <code>quantile(x, 0.25)</code>, <code>max(x)</code>. Kvantiler är en generalisering av medianen. Så kommer t.ex. <code>quantile(x, 0.25)</code> att identifiera det värde som är större än 25% av värdena men mindre än de resterande 75% .</p></li>
</ul>
<p>När lyfter den första respektive ssta flighten per dag?</p>
<div class="sourceCode" id="cb1403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1403-1"><a href="transformering-av-data-1.html#cb1403-1"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1403-2"><a href="transformering-av-data-1.html#cb1403-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1403-3"><a href="transformering-av-data-1.html#cb1403-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1403-4"><a href="transformering-av-data-1.html#cb1403-4"></a>    <span class="dt">first =</span> <span class="kw">min</span>(dep_time),</span>
<span id="cb1403-5"><a href="transformering-av-data-1.html#cb1403-5"></a>    <span class="dt">last =</span> <span class="kw">max</span>(dep_time)</span>
<span id="cb1403-6"><a href="transformering-av-data-1.html#cb1403-6"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 5
## # Groups:   year, month [12]
##     year month   day first  last
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1   517  2356
##  2  2013     1     2    42  2354
##  3  2013     1     3    32  2349
##  4  2013     1     4    25  2358
##  5  2013     1     5    14  2357
##  6  2013     1     6    16  2355
##  7  2013     1     7    49  2359
##  8  2013     1     8   454  2351
##  9  2013     1     9     2  2252
## 10  2013     1    10     3  2320
## # ... with 355 more rows</code></pre>
<ul>
<li><em>Positionsmått</em>: <code>first(x)</code>, <code>nth(x, 2)</code>, <code>last(x)</code>. Dessa motsvarar <code>x[1]</code>, <code>x[2]</code>, och <code>x[length(x)]</code> men gör det möjligt att ha ett default-värde ifall den positionen inte existerar, t.ex. om du försöker få det tredje värdet i en vektor med endast två värden. Vi kan t.ex. identifiera den första resp sista avgången per dag:</li>
</ul>
<div class="sourceCode" id="cb1406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1406-1"><a href="transformering-av-data-1.html#cb1406-1"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1406-2"><a href="transformering-av-data-1.html#cb1406-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1406-3"><a href="transformering-av-data-1.html#cb1406-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb1406-4"><a href="transformering-av-data-1.html#cb1406-4"></a>    <span class="dt">first_dep =</span> <span class="kw">first</span>(dep_time), </span>
<span id="cb1406-5"><a href="transformering-av-data-1.html#cb1406-5"></a>    <span class="dt">last_dep =</span> <span class="kw">last</span>(dep_time)</span>
<span id="cb1406-6"><a href="transformering-av-data-1.html#cb1406-6"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 5
## # Groups:   year, month [12]
##     year month   day first_dep last_dep
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;int&gt;    &lt;int&gt;
##  1  2013     1     1       517     2356
##  2  2013     1     2        42     2354
##  3  2013     1     3        32     2349
##  4  2013     1     4        25     2358
##  5  2013     1     5        14     2357
##  6  2013     1     6        16     2355
##  7  2013     1     7        49     2359
##  8  2013     1     8       454     2351
##  9  2013     1     9         2     2252
## 10  2013     1    10         3     2320
## # ... with 355 more rows</code></pre>
<p>Dessa funktioner är komplementära till att filtrera efter rank. Om du filtrerar får du samtliga variabler för de poster som uppfyller filtreringsvillkoren, med varje post på en egen rad:</p>
<div class="sourceCode" id="cb1409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1409-1"><a href="transformering-av-data-1.html#cb1409-1"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1409-2"><a href="transformering-av-data-1.html#cb1409-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1409-3"><a href="transformering-av-data-1.html#cb1409-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">r =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(dep_time))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1409-4"><a href="transformering-av-data-1.html#cb1409-4"></a><span class="st">  </span><span class="kw">filter</span>(r <span class="op">%in%</span><span class="st"> </span><span class="kw">range</span>(r))</span></code></pre></div>
<pre><code>## # A tibble: 770 x 20
## # Groups:   year, month, day [365]
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour minute time_hour          
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228  EWR    IAH        227     1400     5     15 2013-01-01 05:00:00
##  2  2013     1     1     2356           2359        -3      425            437       -12 B6         727 N588JB  JFK    BQN        186     1576    23     59 2013-01-01 23:00:00
##  3  2013     1     2       42           2359        43      518            442        36 B6         707 N580JB  JFK    SJU        189     1598    23     59 2013-01-02 23:00:00
##  4  2013     1     2     2354           2359        -5      413            437       -24 B6         727 N789JB  JFK    BQN        180     1576    23     59 2013-01-02 23:00:00
##  5  2013     1     3       32           2359        33      504            442        22 B6         707 N763JB  JFK    SJU        193     1598    23     59 2013-01-03 23:00:00
##  6  2013     1     3     2349           2359       -10      434            445       -11 B6         739 N729JB  JFK    PSE        199     1617    23     59 2013-01-03 23:00:00
##  7  2013     1     4       25           2359        26      505            442        23 B6         707 N554JB  JFK    SJU        194     1598    23     59 2013-01-04 23:00:00
##  8  2013     1     4     2358           2359        -1      429            437        -8 B6         727 N599JB  JFK    BQN        189     1576    23     59 2013-01-04 23:00:00
##  9  2013     1     4     2358           2359        -1      436            445        -9 B6         739 N821JB  JFK    PSE        199     1617    23     59 2013-01-04 23:00:00
## 10  2013     1     5       14           2359        15      503            445        18 B6         739 N592JB  JFK    PSE        201     1617    23     59 2013-01-05 23:00:00
## # ... with 760 more rows, and 1 more variable: r &lt;int&gt;</code></pre>
<ul>
<li><em>Antal</em>: <code>n()</code>, som inte tar några argument och returnerar storleken på gruppen. För att räkna non-missing värden använder du <code>sum(!is.na(x))</code>. För att beräkna antalet unika värden i en datamängd användeer du <code>n_distinct(x)</code>:
Vilka destinationer har flest carriers?</li>
</ul>
<div class="sourceCode" id="cb1411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1411-1"><a href="transformering-av-data-1.html#cb1411-1"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1411-2"><a href="transformering-av-data-1.html#cb1411-2"></a><span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1411-3"><a href="transformering-av-data-1.html#cb1411-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">carriers =</span> <span class="kw">n_distinct</span>(carrier)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1411-4"><a href="transformering-av-data-1.html#cb1411-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(carriers))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 104 x 2
##    dest  carriers
##    &lt;chr&gt;    &lt;int&gt;
##  1 ATL          7
##  2 BOS          7
##  3 CLT          7
##  4 ORD          7
##  5 TPA          7
##  6 AUS          6
##  7 DCA          6
##  8 DTW          6
##  9 IAD          6
## 10 MSP          6
## # ... with 94 more rows</code></pre>
<p>Eftersom antalsberäkningar är så användbara finns det i <code>dplyr</code> en enkel hjälpfunktion om allt du vill göra är att beräkna antalet:</p>
<div class="sourceCode" id="cb1414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1414-1"><a href="transformering-av-data-1.html#cb1414-1"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1414-2"><a href="transformering-av-data-1.html#cb1414-2"></a><span class="st">  </span><span class="kw">count</span>(dest)</span></code></pre></div>
<pre><code>## # A tibble: 104 x 2
##    dest      n
##    &lt;chr&gt; &lt;int&gt;
##  1 ABQ     254
##  2 ACK     264
##  3 ALB     418
##  4 ANC       8
##  5 ATL   16837
##  6 AUS    2411
##  7 AVL     261
##  8 BDL     412
##  9 BGR     358
## 10 BHM     269
## # ... with 94 more rows</code></pre>
<p>Du kan också använda en viktningsvariabel. Du kan t.ex. använda en sådan för att beräkna antalet miles som ett plan flög:</p>
<div class="sourceCode" id="cb1416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1416-1"><a href="transformering-av-data-1.html#cb1416-1"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1416-2"><a href="transformering-av-data-1.html#cb1416-2"></a><span class="st">  </span><span class="kw">count</span>(tailnum, <span class="dt">wt =</span> distance)</span></code></pre></div>
<pre><code>## # A tibble: 4,037 x 2
##    tailnum      n
##    &lt;chr&gt;    &lt;dbl&gt;
##  1 D942DN    3418
##  2 N0EGMQ  239143
##  3 N10156  109664
##  4 N102UW   25722
##  5 N103US   24619
##  6 N104UW   24616
##  7 N10575  139903
##  8 N105UW   23618
##  9 N107US   21677
## 10 N108UW   32070
## # ... with 4,027 more rows</code></pre>
<p>Antal och andelar av logiska utfall: <code>sum(x &gt; 10)</code>, <code>mean(y == 0)</code>. När logiska operatorer används på numeriska värden “översätts” <code>TRUE</code> till <code>1</code> och <code>FALSE</code> till <code>0</code>. Detta gör <code>sum()</code> och <code>mean()</code> väldigt användbara: <code>sum(x)</code> ger antalet <code>TRUE</code>s i <code>x</code>, och <code>mean(x)</code> ger andelen:</p>
<div class="sourceCode" id="cb1418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1418-1"><a href="transformering-av-data-1.html#cb1418-1"></a><span class="co"># Hur många flighter lyfte innan kl 5 på morgonen?</span></span>
<span id="cb1418-2"><a href="transformering-av-data-1.html#cb1418-2"></a></span>
<span id="cb1418-3"><a href="transformering-av-data-1.html#cb1418-3"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1418-4"><a href="transformering-av-data-1.html#cb1418-4"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1418-5"><a href="transformering-av-data-1.html#cb1418-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n_early =</span> <span class="kw">sum</span>(dep_time <span class="op">&lt;</span><span class="st"> </span><span class="dv">500</span>))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day n_early
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;
##  1  2013     1     1       0
##  2  2013     1     2       3
##  3  2013     1     3       4
##  4  2013     1     4       3
##  5  2013     1     5       3
##  6  2013     1     6       2
##  7  2013     1     7       2
##  8  2013     1     8       1
##  9  2013     1     9       3
## 10  2013     1    10       3
## # ... with 355 more rows</code></pre>
<div class="sourceCode" id="cb1421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1421-1"><a href="transformering-av-data-1.html#cb1421-1"></a><span class="co"># Hur stor andel av fllighterna var försenade mer än en timme?</span></span>
<span id="cb1421-2"><a href="transformering-av-data-1.html#cb1421-2"></a></span>
<span id="cb1421-3"><a href="transformering-av-data-1.html#cb1421-3"></a>not_cancelled <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1421-4"><a href="transformering-av-data-1.html#cb1421-4"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1421-5"><a href="transformering-av-data-1.html#cb1421-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">hour_perc =</span> <span class="kw">mean</span>(arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day hour_perc
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;
##  1  2013     1     1    0.0722
##  2  2013     1     2    0.0851
##  3  2013     1     3    0.0567
##  4  2013     1     4    0.0396
##  5  2013     1     5    0.0349
##  6  2013     1     6    0.0470
##  7  2013     1     7    0.0333
##  8  2013     1     8    0.0213
##  9  2013     1     9    0.0202
## 10  2013     1    10    0.0183
## # ... with 355 more rows</code></pre>
</div>
<div id="gruppera-med-flera-variabler-1" class="section level2" number="32.16">
<h2><span class="header-section-number">32.16</span> Gruppera med flera variabler</h2>
<p>När du använder fler variabler för att grupera ett dataset erhålls en delsumma för varje nivå i grupperingen. Det gör det enkelt att rulla upp en datamängd som ett sätt att förstå hur den är uppbyggd:</p>
<div class="sourceCode" id="cb1424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1424-1"><a href="transformering-av-data-1.html#cb1424-1"></a>daily &lt;-<span class="st"> </span><span class="kw">group_by</span>(flights, year, month, day)</span>
<span id="cb1424-2"><a href="transformering-av-data-1.html#cb1424-2"></a>(per_day   &lt;-<span class="st"> </span><span class="kw">summarise</span>(daily, <span class="dt">flights =</span> <span class="kw">n</span>()))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39;, &#39;month&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day flights
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;
##  1  2013     1     1     842
##  2  2013     1     2     943
##  3  2013     1     3     914
##  4  2013     1     4     915
##  5  2013     1     5     720
##  6  2013     1     6     832
##  7  2013     1     7     933
##  8  2013     1     8     899
##  9  2013     1     9     902
## 10  2013     1    10     932
## # ... with 355 more rows</code></pre>
<div class="sourceCode" id="cb1427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1427-1"><a href="transformering-av-data-1.html#cb1427-1"></a>(per_month &lt;-<span class="st"> </span><span class="kw">summarise</span>(per_day, <span class="dt">flights =</span> <span class="kw">sum</span>(flights)))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;year&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 12 x 3
## # Groups:   year [1]
##     year month flights
##    &lt;int&gt; &lt;int&gt;   &lt;int&gt;
##  1  2013     1   27004
##  2  2013     2   24951
##  3  2013     3   28834
##  4  2013     4   28330
##  5  2013     5   28796
##  6  2013     6   28243
##  7  2013     7   29425
##  8  2013     8   29327
##  9  2013     9   27574
## 10  2013    10   28889
## 11  2013    11   27268
## 12  2013    12   28135</code></pre>
<div class="sourceCode" id="cb1430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1430-1"><a href="transformering-av-data-1.html#cb1430-1"></a>(per_year  &lt;-<span class="st"> </span><span class="kw">summarise</span>(per_month, <span class="dt">flights =</span> <span class="kw">sum</span>(flights)))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 1 x 2
##    year flights
##   &lt;int&gt;   &lt;int&gt;
## 1  2013  336776</code></pre>
<p>Men var försiktig: Detta fungerar för summor och antal men inte för viktade medelvärden eller för rankningsmått, typ median. Med andra ord, summan av gruppvisa summor är totalsumman, men medianen för gruppvisa medianer är inte lika med medianen för hela datamängden.</p>
</div>
<div id="av-gruppera-1" class="section level2" number="32.17">
<h2><span class="header-section-number">32.17</span> Av-gruppera</h2>
<p>OM du behöver ta bort grupperingen och fortsätta med avgrupperade data använd <code>ungroup()</code>.</p>
<div class="sourceCode" id="cb1433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1433-1"><a href="transformering-av-data-1.html#cb1433-1"></a>daily <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1433-2"><a href="transformering-av-data-1.html#cb1433-2"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st">             </span><span class="co"># no longer grouped by date</span></span>
<span id="cb1433-3"><a href="transformering-av-data-1.html#cb1433-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">flights =</span> <span class="kw">n</span>())  <span class="co"># all flights</span></span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   flights
##     &lt;int&gt;
## 1  336776</code></pre>
</div>
<div id="övningar-40" class="section level2" number="32.18">
<h2><span class="header-section-number">32.18</span> Övningar</h2>
<ol style="list-style-type: decimal">
<li><p>Föreslå en annan ansats som ger samma resultat som <code>not_cancelled %&gt;% count(dest)</code> och <code>not_cancelled %&gt;% count(tailnum, wt = distance)</code> utan att använda count()).</p></li>
<li><p>Vår definition på inställda flyg (<code>is.na(dep_delay) | is.na(arr_delay)</code> ) är något suboptimal. Varför? Vilken är den viktigaste kolumnen?</p></li>
<li><p>Betrakta antalet inställda flighter per dag. Finns ett mönster? Är andelen inställda flighter relaterad till genomsnittlig försening?</p></li>
<li><p>Vilket plan har de största förseningarna? Går det att särskilja effekterna från “dåliga” flygplatser och “dåliga” flyg? Varför/Varför inte? Ledtråd: fundera på <code>flights %&gt;% group_by(carrier, dest) %&gt;% summarise(n()))</code>.</p></li>
<li><p>Vad gör argumentet <code>sort</code> i <code>count()</code>? När kan du ha nytta av det?</p></li>
</ol>
</div>
<div id="grupperade-beräkningar-och-filtreringar-1" class="section level2" number="32.19">
<h2><span class="header-section-number">32.19</span> Grupperade beräkningar och filtreringar</h2>
<p>Gruppering är mest användbart samtidigt med <code>summarise()</code>, men det underlättar också vid beräkningar med hjälp av <code>mutate()</code> och <code>filter()</code>:</p>
<ul>
<li>Identifiera flighterna med de största förseningarna:</li>
</ul>
<div class="sourceCode" id="cb1435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1435-1"><a href="transformering-av-data-1.html#cb1435-1"></a>flights_sml <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1435-2"><a href="transformering-av-data-1.html#cb1435-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span></span>
<span id="cb1435-3"><a href="transformering-av-data-1.html#cb1435-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">rank</span>(<span class="kw">desc</span>(arr_delay)) <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3,306 x 7
## # Groups:   year, month, day [365]
##     year month   day dep_delay arr_delay distance air_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1  2013     1     1       853       851      184       41
##  2  2013     1     1       290       338     1134      213
##  3  2013     1     1       260       263      266       46
##  4  2013     1     1       157       174      213       60
##  5  2013     1     1       216       222      708      121
##  6  2013     1     1       255       250      589      115
##  7  2013     1     1       285       246     1085      146
##  8  2013     1     1       192       191      199       44
##  9  2013     1     1       379       456     1092      222
## 10  2013     1     2       224       207      550       94
## # ... with 3,296 more rows</code></pre>
<ul>
<li>Identifiera alla destinationer med mer än 365 flighter:</li>
</ul>
<div class="sourceCode" id="cb1437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1437-1"><a href="transformering-av-data-1.html#cb1437-1"></a>popular_dests &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1437-2"><a href="transformering-av-data-1.html#cb1437-2"></a><span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1437-3"><a href="transformering-av-data-1.html#cb1437-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">365</span>)</span>
<span id="cb1437-4"><a href="transformering-av-data-1.html#cb1437-4"></a>popular_dests</span></code></pre></div>
<pre><code>## # A tibble: 332,577 x 19
## # Groups:   dest [77]
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest  air_time distance  hour minute time_hour          
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228  EWR    IAH        227     1400     5     15 2013-01-01 05:00:00
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211  LGA    IAH        227     1416     5     29 2013-01-01 05:00:00
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA  JFK    MIA        160     1089     5     40 2013-01-01 05:00:00
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB  JFK    BQN        183     1576     5     45 2013-01-01 05:00:00
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN  LGA    ATL        116      762     6      0 2013-01-01 06:00:00
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463  EWR    ORD        150      719     5     58 2013-01-01 05:00:00
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB  EWR    FLL        158     1065     6      0 2013-01-01 06:00:00
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS  LGA    IAD         53      229     6      0 2013-01-01 06:00:00
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB  JFK    MCO        140      944     6      0 2013-01-01 06:00:00
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA  LGA    ORD        138      733     6      0 2013-01-01 06:00:00
## # ... with 332,567 more rows</code></pre>
<ul>
<li>Standardisera för att beräkna grupp-mått:</li>
</ul>
<div class="sourceCode" id="cb1439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1439-1"><a href="transformering-av-data-1.html#cb1439-1"></a>popular_dests <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1439-2"><a href="transformering-av-data-1.html#cb1439-2"></a><span class="st">  </span><span class="kw">filter</span>(arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1439-3"><a href="transformering-av-data-1.html#cb1439-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_delay =</span> arr_delay <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(arr_delay)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1439-4"><a href="transformering-av-data-1.html#cb1439-4"></a><span class="st">  </span><span class="kw">select</span>(year<span class="op">:</span>day, dest, arr_delay, prop_delay)</span></code></pre></div>
<pre><code>## # A tibble: 131,106 x 6
## # Groups:   dest [77]
##     year month   day dest  arr_delay prop_delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1  2013     1     1 IAH          11  0.000111 
##  2  2013     1     1 IAH          20  0.000201 
##  3  2013     1     1 MIA          33  0.000235 
##  4  2013     1     1 ORD          12  0.0000424
##  5  2013     1     1 FLL          19  0.0000938
##  6  2013     1     1 ORD           8  0.0000283
##  7  2013     1     1 LAX           7  0.0000344
##  8  2013     1     1 DFW          31  0.000282 
##  9  2013     1     1 ATL          12  0.0000400
## 10  2013     1     1 DTW          16  0.000116 
## # ... with 131,096 more rows</code></pre>
<ul>
<li>Funktioner som fungerar bäst för grupperade data ( t.ex. summarise för summeringar) betecknas “window functions”. Du kan läsa mer om dem i en vignette till <code>dplyr</code>: <code>vignette("window-functions")</code></li>
</ul>
</div>
<div id="övningar-41" class="section level2" number="32.20">
<h2><span class="header-section-number">32.20</span> Övningar</h2>
<ol style="list-style-type: decimal">
<li><p>Pröva hur beräknings- och filtrteringsfunktionerna ( <code>mutate()</code> och <code>filter()</code>) förändras då du använder dem på ogrupperade data jämfört med grupperade.</p></li>
<li><p>Vilket plan (<code>tailnum</code>) hade det sämsta utfallet på att vara on time?</p></li>
<li><p>Vilken tid på dagen skulle du flyga om du vill undvika förseningar så mycket som möjligt?</p></li>
<li><p>Beräkna det totala antalet minuter som flighterna är försenade per destination. För varje flight, beräkna andelen av den totala tiden för förseningar per destination.</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="workflow-basics-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="arbetsflöde-scripts-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
